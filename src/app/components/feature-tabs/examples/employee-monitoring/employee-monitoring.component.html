<div class="w-full h-[950px] bg-white rounded-xl overflow-hidden border border-slate-200 shadow-lg flex flex-col md:flex-row font-sans">
  
  <!-- Sidebar: Policies & Controls -->
  <div class="w-full md:w-64 bg-gray-50 border-b md:border-b-0 md:border-r border-slate-200 flex flex-col h-1/3 md:h-full">
    <div class="p-4 border-b border-slate-200">
      <h3 class="text-slate-800 font-bold flex items-center gap-2">
        <fa-icon [icon]="faLock" class="text-unrender-purple"></fa-icon>
        Políticas de Segurança
      </h3>
      <p class="text-xs text-slate-500 mt-1">Gerenciar controles de acesso</p>
    </div>

    <div class="flex-1 overflow-y-auto p-4 space-y-4">
      <div *ngFor="let policy of policies" 
           class="bg-white rounded-lg p-3 border border-slate-200 hover:border-slate-300 transition-colors shadow-sm">
        <div class="flex items-center justify-between mb-2">
          <div class="flex items-center gap-2 text-slate-700 text-sm font-medium">
            <fa-icon [icon]="policy.icon" class="text-slate-400"></fa-icon>
            {{ policy.name }}
          </div>
          <button (click)="togglePolicy(policy)" 
                  class="w-10 h-5 rounded-full transition-colors duration-300 relative flex-shrink-0"
                  [ngClass]="policy.enabled ? 'bg-red-500' : 'bg-slate-300'">
            <div class="absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform duration-300"
                 [ngClass]="policy.enabled ? 'translate-x-5' : 'translate-x-0'"></div>
          </button>
        </div>
        <div class="text-xs" [ngClass]="policy.enabled ? 'text-red-500' : 'text-slate-400'">
          {{ policy.enabled ? 'Acesso Bloqueado' : 'Acesso Permitido' }}
        </div>
      </div>
    </div>

    <!-- Live Log -->
    <div class="h-1/3 border-t border-slate-200 bg-white flex flex-col hidden md:flex">
      <div class="p-2 bg-gray-50 text-xs font-bold text-slate-500 border-b border-slate-200">
        Log de Atividade em Tempo Real
      </div>
      <div class="flex-1 overflow-y-auto p-2 space-y-2 font-mono text-xs">
        <div *ngFor="let log of logs" class="flex gap-2 animate-fade-in">
          <span class="text-slate-400">[{{ log.time }}]</span>
          <span [ngClass]="{
            'text-unrender-purple': log.type === 'info',
            'text-yellow-600': log.type === 'warning',
            'text-red-500': log.type === 'block'
          }">{{ log.message }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content: Employee Grid -->
  <div class="flex-1 bg-white p-6 overflow-y-auto h-2/3 md:h-full">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
      <h2 class="text-xl font-bold text-slate-800">Visão Geral da Equipe</h2>
      <div class="flex flex-wrap gap-4 text-sm">
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 rounded-full bg-green-500"></div>
          <span class="text-slate-500">Produtivo</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
          <span class="text-slate-500">Distraído</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 rounded-full bg-red-500"></div>
          <span class="text-slate-500">Tentativa Bloqueada</span>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div *ngFor="let emp of employees" 
           class="bg-white rounded-xl border border-slate-200 p-4 relative overflow-hidden group hover:border-unrender-purple hover:shadow-md transition-all flex flex-col h-full shadow-sm">
        
        <!-- Blocked Overlay Flash -->
        <div *ngIf="emp.lastBlockedSite" 
             class="absolute inset-0 bg-red-500/10 z-10 flex items-center justify-center animate-flash pointer-events-none"
             (animationend)="emp.lastBlockedSite = undefined">
          <div class="bg-red-600 text-white px-4 py-2 rounded font-bold shadow-lg transform rotate-12 border-2 border-white">
            ACESSO NEGADO
          </div>
        </div>

        <div class="flex items-start gap-4 mb-4">
          <!-- Avatar -->
          <div class="relative flex-shrink-0">
            <div class="w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-lg border-2 border-slate-200">
              {{ emp.avatar }}
            </div>
            <div class="absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white"
                 [ngClass]="{
                   'bg-green-500': emp.status === 'online',
                   'bg-yellow-500': emp.status === 'ausente',
                   'bg-gray-400': emp.status === 'offline'
                 }"></div>
          </div>

          <!-- Info -->
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-start">
              <div class="truncate pr-2">
                <h4 class="text-slate-800 font-semibold truncate">{{ emp.name }}</h4>
                <p class="text-slate-500 text-xs truncate">{{ emp.role }}</p>
              </div>
              <div class="text-right flex-shrink-0">
                <div class="text-2xl font-bold" [ngClass]="getProductivityColor(emp.productivityScore)">
                  {{ emp.productivityScore | number:'1.0-0' }}%
                </div>
                <div class="text-xs text-slate-400">Produtividade</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current Activity (Aligned Bottom) -->
        <div class="mt-auto space-y-3">
            <div class="bg-gray-50 rounded p-2 flex items-center justify-between border border-slate-200 h-10">
              <div class="flex items-center gap-2 truncate">
                <fa-icon [icon]="emp.currentActivity.icon" 
                         [ngClass]="emp.currentActivity.isProductive ? 'text-unrender-purple' : 'text-yellow-500'"
                         class="flex-shrink-0 w-4"></fa-icon>
                <span class="text-sm text-slate-600 truncate">{{ emp.currentActivity.name }}</span>
              </div>
              <span class="text-xs px-2 py-0.5 rounded flex-shrink-0 ml-2"
                    [ngClass]="emp.currentActivity.isProductive ? 'bg-indigo-50 text-unrender-purple' : 'bg-yellow-50 text-yellow-600'">
                {{ emp.currentActivity.isProductive ? 'Trabalho' : 'Pessoal' }}
              </span>
            </div>

            <!-- Stats -->
            <div class="flex gap-4 text-xs text-slate-500 items-center h-5">
              <div class="flex items-center gap-1 flex-shrink-0">
                <fa-icon [icon]="faBan" class="text-red-500"></fa-icon>
                {{ emp.blockedAttempts }} Bloqueios
              </div>
              <div class="flex-1 h-1.5 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full rounded-full transition-all duration-500"
                     [ngClass]="getProgressBarColor(emp.productivityScore)"
                     [style.width.%]="emp.productivityScore"></div>
              </div>
            </div>
        </div>

      </div>
    </div>
  </div>
</div>
