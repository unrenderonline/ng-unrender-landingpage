<div class="demo-container">
  
  <!-- Wearable Simulation -->
  <div *ngIf="type === 'wearable'" class="wearable-device" [ngClass]="platform"
       (mousedown)="onTouchStart($event)" (mouseup)="onTouchEnd($event)" (mouseleave)="onTouchEnd($event)"
       (mousemove)="onTouchMove($event)"
       (touchstart)="onTouchStart($event)" (touchend)="onTouchEnd($event)" (touchmove)="onTouchMove($event)">
    <div class="screen">
      <!-- Apple Watch UI -->
      <div *ngIf="platform === 'apple-watch'" class="watch-ui apple">
        
        <div class="views-container" [style.transform]="watchTransform" [class.animate]="!isDragging">
          
          <!-- Face View -->
          <div class="view-face view-slide">
            <div class="header">
              <span class="time-small">{{ currentTime }}</span>
              <span class="status-icon"><fa-icon [icon]="faBolt" class="charging"></fa-icon></span>
            </div>
            <div class="content">
            <div class="activity-rings">
              <div class="ring red"><fa-icon [icon]="faFire"></fa-icon></div>
              <div class="ring green"><fa-icon [icon]="faWalking"></fa-icon></div>
              <div class="ring blue"><fa-icon [icon]="faArrowLeft" [style.transform]="'rotate(-90deg)'"></fa-icon></div>
            </div>
            <div class="complications">
              <div class="comp-item"><fa-icon [icon]="faFire" class="icon-red"></fa-icon> {{ calories }}</div>
              <div class="comp-item"><fa-icon [icon]="faHeartbeat" class="icon-red pulse-anim"></fa-icon> {{ heartRate }}</div>
            </div>
          </div>
        </div>

        <!-- Apps View -->
        <div class="view-apps view-slide">
          <div class="app-grid">
            <div class="app-icon red"><fa-icon [icon]="faHeartbeat"></fa-icon></div>
            <div class="app-icon green"><fa-icon [icon]="faWalking"></fa-icon></div>
            <div class="app-icon blue"><fa-icon [icon]="faCloud"></fa-icon></div>
            <div class="app-icon orange"><fa-icon [icon]="faClock"></fa-icon></div>
            <div class="app-icon purple"><fa-icon [icon]="faCog"></fa-icon></div>
            <div class="app-icon gray"><fa-icon [icon]="faTerminal"></fa-icon></div>
          </div>
        </div>

        <!-- Health View -->
        <div class="view-health view-slide">
          <div class="health-header">Resumo</div>
          <div class="stats-list">
            <div class="stat-item">
              <fa-icon [icon]="faFire" class="icon-red"></fa-icon>
              <div class="data">
                <span class="value">{{ calories }}</span>
                <span class="label">CAL</span>
              </div>
            </div>
            <div class="stat-item">
              <fa-icon [icon]="faWalking" class="icon-green"></fa-icon>
              <div class="data">
                <span class="value">{{ steps }}</span>
                <span class="label">PASSOS</span>
              </div>
            </div>
            <div class="stat-item">
              <fa-icon [icon]="faHeartbeat" class="icon-red pulse-anim"></fa-icon>
              <div class="data">
                <span class="value">{{ heartRate }}</span>
                <span class="label">BPM</span>
              </div>
            </div>
          </div>
        </div>        </div>
      </div>

      <!-- Android Wear OS UI -->
      <div *ngIf="platform === 'android-wear'" class="watch-ui android">
        
        <div class="views-container" [style.transform]="watchTransform" [class.animate]="!isDragging">
          
          <!-- Face View -->
          <div class="view-face view-slide">
            <div class="watch-face">
              <div class="time-large">{{ currentTime }}</div>
              <div class="date">{{ currentDate }}</div>
            </div>
            <div class="bottom-complication">
              <fa-icon [icon]="faHeartbeat" class="pulse-anim"></fa-icon> {{ heartRate }}
            </div>
          </div>

          <!-- Tiles View (Apps) -->
          <div class="view-tiles view-slide">
             <div class="app-grid-android">
                <div class="app-icon"><fa-icon [icon]="faHeartbeat"></fa-icon></div>
                <div class="app-icon"><fa-icon [icon]="faWalking"></fa-icon></div>
                <div class="app-icon"><fa-icon [icon]="faCloud"></fa-icon></div>
                <div class="app-icon"><fa-icon [icon]="faClock"></fa-icon></div>
             </div>
          </div>

          <!-- Health View -->
          <div class="view-tiles view-slide">
            <div class="card">
              <div class="card-header">
                <fa-icon [icon]="faHeartbeat" class="pulse-anim"></fa-icon> Batimentos
              </div>
              <div class="card-body">
                <span class="big-value">{{ heartRate }}</span> <span class="unit">bpm</span>
              </div>
              <div class="graph-line"></div>
            </div>
            <div class="card">
              <div class="card-header">
                <fa-icon [icon]="faWalking"></fa-icon> Passos
              </div>
              <div class="card-body">
                <span class="big-value">{{ steps }}</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <!-- Watch Body Details -->
    <div class="crown" *ngIf="platform === 'apple-watch'" (click)="toggleWatchView()"></div>
    <div class="button" *ngIf="platform === 'apple-watch'"></div>
  </div>

  <!-- Embedded System (ESP) Simulation -->
  <div *ngIf="type === 'embedded'" class="embedded-system">
    <div class="pcb-board">
      <div class="chip esp32">
        <div class="label">ESP32</div>
        <div class="pins left"></div>
        <div class="pins right"></div>
      </div>
      <div class="led-indicator" [class.on]="ledStatus"></div>
      <div class="label-text">Controlador IoT</div>
      <div class="traces"></div>
    </div>
    
    <div class="terminal-screen">
      <div class="terminal-header">
        <fa-icon [icon]="faTerminal"></fa-icon> Monitor Serial (COM3)
      </div>
      <div class="terminal-content">
        <div *ngFor="let log of logs" class="log-line">
          {{ log }}
        </div>
        <div class="input-line">
          <span class="prompt">></span>
          <input type="text" [(ngModel)]="terminalInput" (keydown.enter)="handleTerminalInput($event)" placeholder="Digite um comando..." />
        </div>
      </div>
      <div class="dashboard-overlay">
        <div class="dash-item">
          <div class="label">TEMP</div>
          <div class="val">{{ temperature | number:'1.1-1' }}°C</div>
        </div>
        <div class="dash-item">
          <div class="label">UMID</div>
          <div class="val">{{ humidity | number:'1.0-0' }}%</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Smart Hub Simulation -->
  <div *ngIf="type === 'smart-hub'" class="smart-hub">
    <div class="hub-screen">
      <div class="hub-topbar">
        <div class="left"><fa-icon [icon]="faArrowLeft"></fa-icon></div>
        <div class="right">
          <fa-icon [icon]="faWifi"></fa-icon>
          <fa-icon [icon]="faChartLine"></fa-icon>
          <fa-icon [icon]="faCog"></fa-icon>
        </div>
      </div>
      
      <div class="hub-main">
        <div class="info-section">
          <div class="time-display">
            <div class="date">{{ currentDate }}</div>
            <div class="time">{{ currentTime }}</div>
          </div>
          
          <!-- Dynamic Content Area -->
          <div class="dynamic-content">
            <div *ngIf="activeHubTab === 'ev'" class="detail-view">
              <div class="detail-icon"><fa-icon [icon]="faCar"></fa-icon></div>
              <div class="detail-info">
                <div class="label">Carregando</div>
                <div class="value">{{ evBattery }}%</div>
                <div class="sub">1h 20m restante</div>
              </div>
            </div>
            
            <div *ngIf="activeHubTab === 'home'" class="detail-view">
              <div class="control-row">
                <button class="hub-btn" [class.active]="smartLights" (click)="toggleLight()">
                  <fa-icon [icon]="faLightbulb"></fa-icon> Luzes
                </button>
                <button class="hub-btn" [class.active]="smartLock" (click)="toggleLock()">
                  <fa-icon [icon]="faLock"></fa-icon> Tranca
                </button>
              </div>
            </div>

            <div *ngIf="activeHubTab === 'thermostat'" class="detail-view">
              <div class="thermo-control">
                <button (click)="adjustTemp(-1)">-</button>
                <div class="temp-val">{{ thermostatTarget }}°</div>
                <button (click)="adjustTemp(1)">+</button>
              </div>
              <div class="sub">Temperatura Alvo</div>
            </div>
          </div>

          <div class="weather-display">
            <fa-icon [icon]="faCloud" class="weather-icon"></fa-icon>
            <div class="temp-main">{{ hubTemp }}°</div>
            <div class="temp-range">H: {{ hubHigh }}° L: {{ hubLow }}°</div>
          </div>
        </div>

        <div class="cards-grid">
          <div class="hub-card" [class.active]="activeHubTab === 'ev'" (click)="setHubTab('ev')">
            <div class="icon-circle"><fa-icon [icon]="faBolt"></fa-icon></div>
            <div class="card-label">Carregamento VE</div>
          </div>
          <div class="hub-card" [class.active]="activeHubTab === 'home'" (click)="setHubTab('home')">
            <div class="icon-circle"><fa-icon [icon]="faHome"></fa-icon></div>
            <div class="card-label">Casa Inteligente</div>
          </div>
          <div class="hub-card" [class.active]="activeHubTab === 'meter'" (click)="setHubTab('meter')">
            <div class="icon-circle"><fa-icon [icon]="faSun"></fa-icon></div>
            <div class="card-label">Medidor</div>
          </div>
          <div class="hub-card" [class.active]="activeHubTab === 'thermostat'" (click)="setHubTab('thermostat')">
            <div class="icon-circle"><fa-icon [icon]="faThermometerHalf"></fa-icon></div>
            <div class="card-label">Termostato</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Edge AI Simulation -->
  <div *ngIf="type === 'edge-ai'" class="edge-ai-system">
    <div class="camera-feed">
      <div class="feed-overlay">
        <div class="detection-box" *ngFor="let obj of detectedObjects"
             [style.left.px]="obj.x" [style.top.px]="obj.y" 
             [style.width.px]="obj.w" [style.height.px]="obj.h"
             [style.border-color]="obj.color">
          <span class="obj-label" [style.background-color]="obj.color">{{ obj.label }} {{ confidence }}%</span>
        </div>
      </div>
      <div class="camera-label"><fa-icon [icon]="faCamera"></fa-icon> LIVE FEED</div>
    </div>
    <div class="ai-stats">
      <div class="stat-row">
        <span class="label">Model:</span> <span class="val">MobileNetV2 (Quantized)</span>
      </div>
      <div class="stat-row">
        <span class="label">Inference:</span> <span class="val">{{ inferenceTime }}ms</span>
      </div>
      <div class="stat-row">
        <span class="label">Device:</span> <span class="val">Edge TPU</span>
      </div>
      <div class="stat-row">
        <span class="label">FPS:</span> <span class="val">30</span>
      </div>
    </div>
  </div>

</div>
