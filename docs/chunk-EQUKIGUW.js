import{a as Y,b as U,e as q,g as K,i as J}from"./chunk-B2TY264T.js";import{Aa as H,B as V,Wa as Z,h as L,l as N,ma as G,ya as z}from"./chunk-APBCXCJV.js";import{a as B,b as R}from"./chunk-2PWV3ZRO.js";import"./chunk-7NMITLUU.js";import{i as F,k as O,l as P,p as W,r as j}from"./chunk-X7Q72NDQ.js";import{$a as E,Bb as d,Cb as t,Db as n,Eb as r,Oa as a,Pb as y,Rb as w,Ta as v,Xb as k,_b as s,ac as p,cc as S,dc as _,ea as g,eb as u,ec as C,fa as I,ib as T,lc as M,nc as D,vb as x,yc as A}from"./chunk-Z4PMJ25B.js";function X(l,o){if(l&1&&(g(),r(0,"circle",46)),l&2){let i=o.$implicit;x("cx",i.x+"%")("cy",i.y+"%")("opacity",i.opacity)}}function $(l,o){if(l&1&&(g(),r(0,"path",47)),l&2){let i=w();x("d","M "+i.drone.x+"% "+(i.drone.y+5)+"% L "+(i.drone.x-5)+"% 100% L "+(i.drone.x+5)+"% 100% Z")}}function ee(l,o){l&1&&r(0,"div",48)}function te(l,o){l&1&&r(0,"div",49)}function ne(l,o){if(l&1&&(t(0,"div",50)(1,"div",51),r(2,"div",52),t(3,"span",53),s(4),n()(),t(5,"div",54),r(6,"div",55),n(),t(7,"div",56),r(8,"div",57)(9,"div",57)(10,"div",57)(11,"div",57)(12,"div",57)(13,"div",57)(14,"div",57)(15,"div",57)(16,"div",57),n()()),l&2){let i=w();a(4),p("GRAV ",i.formattedRecordingTime)}}function ie(l,o){l&1&&(t(0,"p")(1,"strong"),s(2,"Modo LiDAR:"),n(),s(3," O drone escaneia a estrutura gerando uma nuvem de pontos. Use os controles para ajustar a altitude de varredura. "),n())}function ae(l,o){l&1&&(t(0,"p")(1,"strong"),s(2,"Modo Cinema:"),n(),s(3," Estabiliza\xE7\xE3o de c\xE2mera ativada para capturas suaves em 4K. O drone mant\xE9m movimento fluido. "),n())}var Q=class l{constructor(o,i){this.cdr=o;this.ngZone=i}faPlane=G;faCamera=N;faVideo=V;faMapMarkedAlt=L;faBroadcastTower=H;faBatteryFull=z;faWind=Z;drone={id:"d1",x:10,y:50,status:"scanning",battery:85,altitude:45,speed:12};targetAltitude=45;targetSpeed=12;recordingTime=0;recordingInterval;points=[];mode="lidar";animationFrameId;lastTime=0;direction=1;modeLockedUntil=0;ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.startSimulation()}),this.startRecordingTimer()}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.recordingInterval&&clearInterval(this.recordingInterval)}startRecordingTimer(){this.recordingInterval=setInterval(()=>{this.mode==="cinema"&&(this.recordingTime++,this.cdr.detectChanges())},1e3)}get formattedRecordingTime(){let o=Math.floor(this.recordingTime/3600),i=Math.floor(this.recordingTime%3600/60),e=this.recordingTime%60;return`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}setMode(o,i=!1){i&&(this.modeLockedUntil=Date.now()+1e4),this.mode=o,this.points=[],this.drone.status=o==="lidar"?"scanning":"cinema",this.cdr.detectChanges()}startSimulation(){let o=i=>{this.lastTime||(this.lastTime=i),i-this.lastTime>16&&(this.updateDrone(),this.lastTime=i,this.cdr.detectChanges()),this.animationFrameId=requestAnimationFrame(o)};requestAnimationFrame(o)}updateDrone(){this.drone.speed=this.targetSpeed,this.drone.altitude=this.targetAltitude;let o=this.drone.speed/40;this.drone.x+=o*this.direction,this.drone.x>90?this.direction===1&&(this.direction=-1,this.drone.x=90):this.drone.x<10&&this.direction===-1&&(this.direction=1,this.drone.x=10,Date.now()>this.modeLockedUntil&&this.setMode(this.mode==="lidar"?"cinema":"lidar"));let i=60-(this.drone.altitude-10)/90*50,e=this.drone.y-Math.sin(Date.now()/1e3)*2,c=e+(i-e)*.05;if(this.drone.y=c+Math.sin(Date.now()/1e3)*2,this.mode==="lidar"){let h=Math.abs(this.drone.x-50);if(h<20&&Math.random()>.5){let b=50+h/20*20,f=b;h<18&&Math.random()>.5?f=70+Math.random()*30:f=b+(Math.random()*2-1),this.points.push({x:this.drone.x+(Math.random()-.5)*1,y:f,opacity:1})}}for(let m=this.points.length-1;m>=0;m--)this.points[m].opacity-=.005,this.points[m].opacity<=0&&this.points.splice(m,1)}static \u0275fac=function(i){return new(i||l)(v(A),v(T))};static \u0275cmp=E({type:l,selectors:[["app-drone-simulation"]],decls:71,vars:30,consts:[[1,"w-full","bg-white","rounded-xl","border","border-slate-200","shadow-lg","flex","flex-col","lg:flex-row","overflow-hidden","font-sans","select-none"],[1,"relative","w-full","aspect-video","lg:flex-1","bg-gradient-to-b","from-blue-50","to-white","overflow-hidden"],[1,"absolute","inset-0","opacity-30","pointer-events-none",2,"background-image","radial-gradient(#cbd5e1 1px, transparent 1px)","background-size","50px 50px"],[1,"absolute","bottom-0","left-1/2","transform","-translate-x-1/2","w-[40%]","h-[50%]","z-10","flex","flex-col","items-center","justify-end","pointer-events-none"],[1,"w-full","h-[40%]","relative","drop-shadow-lg"],[1,"absolute","inset-0","bg-slate-400",2,"clip-path","polygon(50% 0%, 0% 100%, 100% 100%)"],[1,"w-[90%]","h-[60%]","bg-slate-200","border-x-4","border-slate-300","relative","shadow-xl","flex","justify-center"],[1,"absolute","top-8","left-8","w-[20%]","h-[40%]","bg-blue-200/40","border-4","border-slate-300","flex","flex-col"],[1,"h-1/2","border-b-2","border-slate-300"],[1,"absolute","top-0","left-1/2","h-full","border-l-2","border-slate-300","transform","-translate-x-1/2"],[1,"absolute","top-8","right-8","w-[20%]","h-[40%]","bg-blue-200/40","border-4","border-slate-300","flex","flex-col"],[1,"absolute","bottom-0","w-[25%]","h-[55%]","bg-slate-700","border-t-4","border-x-4","border-slate-300"],[1,"absolute","top-1/2","right-2","w-2","h-2","bg-yellow-500","rounded-full"],[1,"absolute","inset-0","w-full","h-full","z-20","pointer-events-none"],["r","2","fill","#10051c",4,"ngFor","ngForOf"],["fill","url(#beamGradient)","opacity","0.3",4,"ngIf"],["id","beamGradient","x1","0","y1","0","x2","0","y2","1"],["offset","0%","stop-color","#10051c","stop-opacity","0.5"],["offset","100%","stop-color","#10051c","stop-opacity","0"],[1,"absolute","z-30","transform","-translate-x-1/2","-translate-y-1/2","transition-transform","duration-100"],[1,"relative"],[1,"w-16","h-4","bg-white","border","border-slate-200","rounded-full","shadow-lg","relative","z-10"],[1,"absolute","-top-2","-left-2","w-8","h-1","bg-slate-800","animate-spin-fast"],[1,"absolute","-top-2","-right-2","w-8","h-1","bg-slate-800","animate-spin-fast"],[1,"absolute","top-4","left-1/2","transform","-translate-x-1/2","w-4","h-4","bg-black","rounded-full","border-2","border-slate-300","flex","items-center","justify-center"],["class","w-1 h-1 bg-red-500 rounded-full animate-pulse",4,"ngIf"],["class","w-1 h-1 bg-green-500 rounded-full",4,"ngIf"],[1,"absolute","-top-12","left-1/2","transform","-translate-x-1/2","bg-white/90","px-2","py-1","rounded","text-xs","text-slate-800","whitespace-nowrap","border","border-slate-200","shadow-md","backdrop-blur-sm"],["class","absolute inset-0 pointer-events-none z-30 border-[40px] border-black/10 flex items-center justify-center",4,"ngIf"],[1,"w-full","lg:w-80","bg-slate-50","p-6","border-t","lg:border-t-0","lg:border-l","border-slate-200","flex","flex-col","gap-6"],[1,"bg-white","p-1","rounded-lg","border","border-slate-200","shadow-sm","flex"],[1,"flex-1","py-2","rounded-md","flex","items-center","justify-center","gap-2","transition-all","text-sm","font-medium",3,"click","ngClass"],[3,"icon"],[1,"space-y-6"],[1,"flex","justify-between","items-center","p-3","bg-white","rounded-lg","border","border-slate-200"],[1,"text-slate-500","text-sm","flex","items-center","gap-2"],[1,"text-green-600","font-mono","font-bold"],[1,"space-y-2"],[1,"flex","justify-between","items-center","text-sm"],[1,"text-slate-500","flex","items-center","gap-2"],[1,"text-unrender-purple","font-mono","font-bold"],["type","range","min","10","max","100",1,"w-full","h-2","bg-slate-200","rounded-lg","appearance-none","cursor-pointer","accent-unrender-purple",3,"ngModelChange","ngModel"],[1,"text-slate-800","font-mono","font-bold"],["type","range","min","5","max","25",1,"w-full","h-2","bg-slate-200","rounded-lg","appearance-none","cursor-pointer","accent-slate-400",3,"ngModelChange","ngModel"],[1,"mt-auto","p-4","bg-blue-50","rounded-lg","border","border-blue-100","text-xs","text-blue-700","leading-relaxed"],[4,"ngIf"],["r","2","fill","#10051c"],["fill","url(#beamGradient)","opacity","0.3"],[1,"w-1","h-1","bg-red-500","rounded-full","animate-pulse"],[1,"w-1","h-1","bg-green-500","rounded-full"],[1,"absolute","inset-0","pointer-events-none","z-30","border-[40px]","border-black/10","flex","items-center","justify-center"],[1,"absolute","top-8","right-8","flex","items-center","gap-2","animate-pulse"],[1,"w-3","h-3","bg-red-500","rounded-full"],[1,"text-red-500","font-mono","font-bold"],[1,"w-8","h-8","border","border-white/50","flex","items-center","justify-center"],[1,"w-1","h-1","bg-white/80","rounded-full"],[1,"absolute","inset-0","grid","grid-cols-3","grid-rows-3","opacity-20"],[1,"border","border-white/40"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"div",1),r(2,"div",2),t(3,"div",3)(4,"div",4),r(5,"div",5),n(),t(6,"div",6)(7,"div",7),r(8,"div",8)(9,"div",9),n(),t(10,"div",10),r(11,"div",8)(12,"div",9),n(),t(13,"div",11),r(14,"div",12),n()()(),g(),t(15,"svg",13),u(16,X,1,3,"circle",14)(17,$,1,1,"path",15),t(18,"defs")(19,"linearGradient",16),r(20,"stop",17)(21,"stop",18),n()()(),I(),t(22,"div",19)(23,"div",20),r(24,"div",21)(25,"div",22)(26,"div",23),t(27,"div",24),u(28,ee,1,0,"div",25)(29,te,1,0,"div",26),n()(),t(30,"div",27),s(31),n()(),u(32,ne,17,1,"div",28),n(),t(33,"div",29)(34,"div",30)(35,"button",31),y("click",function(){return e.setMode("lidar",!0)}),r(36,"fa-icon",32),t(37,"span"),s(38,"LiDAR"),n()(),t(39,"button",31),y("click",function(){return e.setMode("cinema",!0)}),r(40,"fa-icon",32),t(41,"span"),s(42,"Cinema"),n()()(),t(43,"div",33)(44,"div",34)(45,"span",35),r(46,"fa-icon",32),s(47," Bateria"),n(),t(48,"span",36),s(49),n()(),t(50,"div",37)(51,"div",38)(52,"span",39),r(53,"fa-icon",32),s(54," Altitude"),n(),t(55,"span",40),s(56),M(57,"number"),n()(),t(58,"input",41),C("ngModelChange",function(m){return _(e.targetAltitude,m)||(e.targetAltitude=m),m}),n()(),t(59,"div",37)(60,"div",38)(61,"span",39),r(62,"fa-icon",32),s(63," Velocidade"),n(),t(64,"span",42),s(65),M(66,"number"),n()(),t(67,"input",43),C("ngModelChange",function(m){return _(e.targetSpeed,m)||(e.targetSpeed=m),m}),n()()(),t(68,"div",44),u(69,ie,4,0,"p",45)(70,ae,4,0,"p",45),n()()()),i&2&&(a(16),d("ngForOf",e.points),a(),d("ngIf",e.mode==="lidar"),a(5),k("left",e.drone.x,"%")("top",e.drone.y,"%"),a(6),d("ngIf",e.mode==="cinema"),a(),d("ngIf",e.mode==="lidar"),a(2),p(" ",e.mode==="lidar"?"Escaneando...":"Gravando 4K"," "),a(),d("ngIf",e.mode==="cinema"),a(3),d("ngClass",e.mode==="lidar"?"bg-unrender-purple text-white shadow-sm":"text-slate-500 hover:bg-slate-100"),a(),d("icon",e.faMapMarkedAlt),a(3),d("ngClass",e.mode==="cinema"?"bg-red-500 text-white shadow-sm":"text-slate-500 hover:bg-slate-100"),a(),d("icon",e.faVideo),a(6),d("icon",e.faBatteryFull),a(3),p("",e.drone.battery,"%"),a(4),d("icon",e.faPlane),a(3),p("",D(57,24,e.drone.altitude,"1.0-0"),"m"),a(2),S("ngModel",e.targetAltitude),a(4),d("icon",e.faWind),a(3),p("",D(66,27,e.drone.speed,"1.0-0")," m/s"),a(2),S("ngModel",e.targetSpeed),a(2),d("ngIf",e.mode==="lidar"),a(),d("ngIf",e.mode==="cinema"))},dependencies:[j,F,O,P,R,B,J,Y,K,U,q,W],styles:["[_nghost-%COMP%]{display:block;width:100%}.animate-spin-fast[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin .1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{Q as DroneSimulationComponent};
