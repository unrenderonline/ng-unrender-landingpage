import{a as X}from"./chunk-MNIMYAGS.js";import{B as V,Ca as U,D as h,Fa as Q,J as w,K as D,Ka as Y,La as q,R as v,S as G,T as O,W as L,X as I,Z as B,ea as W,fa as _,ga as N,ia as H,ka as k,la as y,oa as Z,z as F}from"./chunk-4LPJBBUQ.js";import{$a as b,Fb as f,Gb as u,Hb as g,Ma as p,Pb as C,Ta as T,Ub as M,Vb as z,Wb as A,_ as S,_b as m,ib as P}from"./chunk-W6V62TGU.js";var ce=["canvas"],J=class R{constructor(e){this.ngZone=e;this.loadingService.show()}canvasRef;scene;camera;renderer;mouseFollowGroup;constellationPoints;constellationLines;constellationVertices=[];instancedCube;instanceData=[];animationFrameId;scrollPercent=0;mouse=new V;loadingService=S(X);intersectionObserver;ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{try{this.initThree(),this.setupIntersectionObserver()}finally{this.ngZone.run(()=>{this.loadingService.hide()})}})}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.disposeThree()}setupIntersectionObserver(){this.canvasRef?.nativeElement&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting?this.animationFrameId||this.animate():this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0)})}),this.intersectionObserver.observe(this.canvasRef.nativeElement))}disposeThree(){this.renderer&&this.renderer.dispose(),this.scene&&this.scene.traverse(e=>{(e instanceof G||e instanceof y||e instanceof H)&&(e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(i=>i.dispose()):e.material.dispose()))})}onWindowScroll(){if(!this.canvasRef?.nativeElement)return;let e=this.canvasRef.nativeElement.parentElement?.clientHeight||window.innerHeight;this.scrollPercent=Math.min(window.scrollY/(e*.8),1)}onWindowResize(){if(this.camera&&this.renderer){let e=this.canvasRef.nativeElement.parentElement;if(e){let i=e.clientWidth,n=e.clientHeight;this.camera.aspect=i/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(i,n),this.renderer.setPixelRatio(1)}}}onMouseMove(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-(e.clientY/window.innerHeight)*2+1}onTouchMove(e){e.touches.length>0&&(this.mouse.x=e.touches[0].clientX/window.innerWidth*2-1,this.mouse.y=-(e.touches[0].clientY/window.innerHeight)*2+1)}initThree(){let e=this.canvasRef.nativeElement.parentElement,i=e?e.clientWidth:window.innerWidth,n=e?e.clientHeight:window.innerHeight;this.scene=new B,this.camera=new L(75,i/n,.1,1e3),this.camera.position.z=20,this.renderer=new q({canvas:this.canvasRef.nativeElement,alpha:!0,antialias:!1}),this.renderer.setSize(i,n),this.renderer.setPixelRatio(1),this.scene.add(new Q(16777215,.8));let s=new U(16753920,3,150);s.position.set(10,15,20),this.scene.add(s),this.mouseFollowGroup=new I,this.mouseFollowGroup.position.y=-4.5,this.scene.add(this.mouseFollowGroup),this.createClusteredCube(),this.createConstellationBackground()}createConstellationBackground(){let e=new v,i=200,n=250;for(let l=0;l<i;l++){let c=(Math.random()-.5)*n,t=(Math.random()-.5)*n,o=(Math.random()-.5)*n,d=new h(c,t,o);d.velocity=new h((Math.random()-.5)*.1,(Math.random()-.5)*.1,(Math.random()-.5)*.1),this.constellationVertices.push(d)}e.setFromPoints(this.constellationVertices);let s=new k({color:5202043,size:2,sizeAttenuation:!0});this.constellationPoints=new y(e,s),this.scene.add(this.constellationPoints);let a=new v,r=new N({color:2767442,transparent:!0,opacity:.25});this.constellationLines=new H(a,r),this.scene.add(this.constellationLines)}createClusteredCube(){let a=new O(1,1,1),r=new Z({color:16747520,metalness:.7,roughness:.3}),l=5*5*5;this.instancedCube=new W(a,r,l),this.instancedCube.instanceMatrix.setUsage(F);for(let c=0;c<5;c++)for(let t=0;t<5;t++)for(let o=0;o<5;o++){let d=c*5*5+t*5+o,E=new h((c-2)*1.2,(t-2)*1.2,(o-2)*1.2),K=new h(1,1.2,.3),$=new h(Math.random()*.6-.2,Math.random()*.5-.1,Math.random()*.6-.3),j=K.clone().add($).normalize(),ee=(4-t)/4,te=(4-c)/4,ie=(4-o)/4,ne=ee*.6+te*.25+ie*.15,oe=Math.random()*.3,se=ne+oe,re=Math.random()*.15,ae={originalPosition:E.clone(),explosionVector:j,explosionDelay:se,randomStartOffset:re,currentPosition:E.clone(),rotation:new D(0,0,0)};this.instanceData[d]=ae;let x=new w;x.setPosition(E),this.instancedCube.setMatrixAt(d,x)}this.mouseFollowGroup.add(this.instancedCube)}updateConstellation(){let e=[],a=new Y;a.setFromCamera(this.mouse,this.camera);let r=new _(new h(0,0,1),0),l=new h;a.ray.intersectPlane(r,l);let c=40;for(let t of this.constellationVertices){if(l){let o=t.distanceTo(l);if(o<c){let d=new h().subVectors(t,l).normalize(),E=(c-o)/c;t.add(d.multiplyScalar(E*1.5))}}t.add(t.velocity),t.x<-125&&(t.x=125),t.x>125&&(t.x=-125),t.y<-125&&(t.y=125),t.y>125&&(t.y=-125),t.z<-125&&(t.z=125),t.z>125&&(t.z=-125)}for(let t=0;t<this.constellationVertices.length;t++)for(let o=t+1;o<this.constellationVertices.length;o++)this.constellationVertices[t].distanceTo(this.constellationVertices[o])<35&&e.push(this.constellationVertices[t],this.constellationVertices[o]);if(this.constellationPoints.geometry.setFromPoints(this.constellationVertices),this.constellationLines){let t=e.length,o=this.constellationLines.geometry.attributes.position?.count||0;if(t!==o){this.constellationLines.geometry.dispose();let d=new v;d.setFromPoints(e),this.constellationLines.geometry=d}else t>0&&this.constellationLines.geometry.setFromPoints(e)}}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.instancedCube.rotation.y+=.002,this.instancedCube.rotation.x+=.001,this.mouseFollowGroup&&(this.mouseFollowGroup.rotation.y+=(this.mouse.x*.2-this.mouseFollowGroup.rotation.y)*.05,this.mouseFollowGroup.rotation.x+=(-this.mouse.y*.2-this.mouseFollowGroup.rotation.x)*.05),this.updateConstellation(),this.constellationPoints&&(this.constellationPoints.rotation.y+=(this.mouse.x*1e-4-this.constellationPoints.rotation.y)*.05,this.constellationPoints.rotation.x+=(-this.mouse.y*1e-4-this.constellationPoints.rotation.x)*.05,this.constellationLines.rotation.copy(this.constellationPoints.rotation));for(let e=0;e<this.instanceData.length;e++){let i=this.instanceData[e],n=i.explosionDelay,s=i.randomStartOffset,a=this.scrollPercent+s,r=0;a>n&&(r=Math.min(1,(a-n)/(1-n+.3)));let l=r*r*(3-2*r),c=50+Math.random()*20,t=new h().copy(i.explosionVector).multiplyScalar(l*c).add(i.originalPosition);i.currentPosition.lerp(t,.1),r>0&&(i.rotation.x+=.02*r,i.rotation.y+=.03*r,i.rotation.z+=.015*r);let o=new w;o.makeRotationFromEuler(i.rotation),o.setPosition(i.currentPosition),this.instancedCube.setMatrixAt(e,o)}this.instancedCube.instanceMatrix.needsUpdate=!0,this.renderer.render(this.scene,this.camera)}static \u0275fac=function(i){return new(i||R)(T(P))};static \u0275cmp=b({type:R,selectors:[["app-hero-cube"]],viewQuery:function(i,n){if(i&1&&M(ce,5),i&2){let s;z(s=A())&&(n.canvasRef=s.first)}},hostBindings:function(i,n){i&1&&C("scroll",function(){return n.onWindowScroll()},p)("resize",function(){return n.onWindowResize()},p)("mousemove",function(a){return n.onMouseMove(a)},p)("touchmove",function(a){return n.onTouchMove(a)},p)},decls:23,vars:0,consts:[["canvas",""],[1,"hero-canvas"],[1,"hero-text"],[1,"inline-block","px-4","py-2","mb-6","rounded-full","bg-unrender-accent/10","border","border-unrender-accent/30","backdrop-blur-sm"],[1,"text-unrender-accent","font-semibold","text-sm","tracking-wider"],[1,"text-5xl","md:text-7xl","font-black","mb-6","leading-tight"],[1,"text-unrender-accent"],[1,"max-w-2xl","mx-auto","space-y-3","text-lg","md:text-xl","font-light"],[1,"opacity-90"]],template:function(i,n){i&1&&(g(0,"canvas",1,0),f(2,"div",2)(3,"div",3)(4,"span",4),m(5,"SOLU\xC7\xD5ES PRONTAS E PERSONALIZADAS"),u()(),f(6,"h1",5)(7,"span",6),m(8,"CONSTRUINDO"),u(),g(9,"br"),m(10," O QUE VOC\xCA "),g(11,"br"),f(12,"span",6),m(13,"PRECISA"),u(),m(14,"!"),g(15,"br"),u(),f(16,"div",7)(17,"p",8),m(18,"Software Nativo e H\xEDbrido"),u(),f(19,"p",8),m(20,"Landing Pages e Web Apps"),u(),f(21,"p",8),m(22,"SaaS e On-Premise"),u()()())},styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%}.hero-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.hero-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;text-align:center;text-shadow:0 2px 15px rgba(0,0,0,.5);pointer-events:none}"],changeDetection:0})};export{J as HeroCube};
