import{V as G,i as u,r as U}from"./chunk-W6V62TGU.js";var Y=["user","model","function","system"];var A=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER",t}(A||{});var f=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},_=class extends f{constructor(e,n){super(e),this.response=n}},N=class extends f{constructor(e,n,o,s){super(e),this.status=n,this.statusText=o,this.errorDetails=s}},C=class extends f{},T=class extends f{};var J="https://generativelanguage.googleapis.com",W="v1beta",z="0.24.1",X="genai-js",I=function(t){return t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents",t}(I||{}),L=class{constructor(e,n,o,s,i){this.model=e,this.task=n,this.apiKey=o,this.stream=s,this.requestOptions=i}toString(){var e,n;let o=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||W,i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||J}/${o}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}};function Q(t){let e=[];return t?.apiClient&&e.push(t.apiClient),e.push(`${X}/${z}`),e.join(" ")}function Z(t){return u(this,null,function*(){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Q(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let o=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(s){throw new C(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${s.message}`)}for(let[s,i]of o.entries()){if(s==="x-goog-api-key")throw new C(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new C(`Header name ${s} can only be set using the apiClient field`);n.append(s,i)}}return n})}function tt(t,e,n,o,s,i){return u(this,null,function*(){let a=new L(t,e,n,o,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},ot(i)),{method:"POST",headers:yield Z(a),body:s})}})}function R(r,d,g,p,O){return u(this,arguments,function*(t,e,n,o,s,i={},a=fetch){let{url:c,fetchOptions:h}=yield tt(t,e,n,o,s,i);return et(c,h,a)})}function et(o,s){return u(this,arguments,function*(t,e,n=fetch){let i;try{i=yield n(t,e)}catch(a){nt(a,t)}return i.ok||(yield st(i,t)),i})}function nt(t,e){let n=t;throw n.name==="AbortError"?(n=new T(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof N||t instanceof C||(n=new f(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}function st(t,e){return u(this,null,function*(){let n="",o;try{let s=yield t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,o=s.error.details)}catch{}throw new N(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,o)})}function ot(t){let e={};if(t?.signal!==void 0||t?.timeout>=0){let n=new AbortController;t?.timeout>=0&&setTimeout(()=>n.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function x(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),w(t.candidates[0]))throw new _(`${v(t)}`,t);return it(t)}else if(t.promptFeedback)throw new _(`Text not available. ${v(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),w(t.candidates[0]))throw new _(`${v(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),F(t)[0]}else if(t.promptFeedback)throw new _(`Function call not available. ${v(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),w(t.candidates[0]))throw new _(`${v(t)}`,t);return F(t)}else if(t.promptFeedback)throw new _(`Function call not available. ${v(t)}`,t)},t}function it(t){var e,n,o,s;let i=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let a of(s=(o=t.candidates)===null||o===void 0?void 0:o[0].content)===null||s===void 0?void 0:s.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function F(t){var e,n,o,s;let i=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let a of(s=(o=t.candidates)===null||o===void 0?void 0:o[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}var at=[A.RECITATION,A.SAFETY,A.LANGUAGE];function w(t){return!!t.finishReason&&at.includes(t.finishReason)}function v(t){var e,n,o;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((o=t.candidates)===null||o===void 0)&&o[0]){let i=t.candidates[0];w(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function rt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(c){o[c]&&(s[c]=function(h){return new Promise(function(l,E){i.push([c,h,l,E])>1||r(c,h)})})}function r(c,h){try{d(o[c](h))}catch(l){O(i[0][3],l)}}function d(c){c.value instanceof m?Promise.resolve(c.value.v).then(g,p):O(i[0][2],c)}function g(c){r("next",c)}function p(c){r("throw",c)}function O(c,h){c(h),i.shift(),i.length&&r(i[0][0],i[0][1])}}var H=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ct(t){let e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=ut(e),[o,s]=n.tee();return{stream:lt(o),response:dt(s)}}function dt(t){return u(this,null,function*(){let e=[],n=t.getReader();for(;;){let{done:o,value:s}=yield n.read();if(o)return x(ft(e));e.push(s)}})}function lt(t){return rt(this,arguments,function*(){let n=t.getReader();for(;;){let{value:o,done:s}=yield m(n.read());if(s)break;yield yield m(x(o))}})}function ut(t){let e=t.getReader();return new ReadableStream({start(o){let s="";return i();function i(){return e.read().then(({value:a,done:r})=>{if(r){if(s.trim()){o.error(new f("Failed to parse stream"));return}o.close();return}s+=a;let d=s.match(H),g;for(;d;){try{g=JSON.parse(d[1])}catch{o.error(new f(`Error parsing JSON response: "${d[1]}"`));return}o.enqueue(g),s=s.substring(d[0].length),d=s.match(H)}return i()}).catch(a=>{let r=a;throw r.stack=a.stack,r.name==="AbortError"?r=new T("Request aborted when reading from the stream"):r=new f("Error reading from the stream"),r})}}})}function ft(t){let e=t[t.length-1],n={promptFeedback:e?.promptFeedback};for(let o of t){if(o.candidates){let s=0;for(let i of o.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].groundingMetadata=i.groundingMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[]});let a={};for(let r of i.content.parts)r.text&&(a.text=r.text),r.functionCall&&(a.functionCall=r.functionCall),r.executableCode&&(a.executableCode=r.executableCode),r.codeExecutionResult&&(a.codeExecutionResult=r.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[s].content.parts.push(a)}s++}o.usageMetadata&&(n.usageMetadata=o.usageMetadata)}return n}function B(t,e,n,o){return u(this,null,function*(){let s=yield R(e,I.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),o);return ct(s)})}function P(t,e,n,o){return u(this,null,function*(){let i=yield(yield R(e,I.GENERATE_CONTENT,t,!1,JSON.stringify(n),o)).json();return{response:x(i)}})}function q(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function S(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(let n of t)typeof n=="string"?e.push({text:n}):e.push(n);return ht(e)}function ht(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},o=!1,s=!1;for(let i of t)"functionResponse"in i?(n.parts.push(i),s=!0):(e.parts.push(i),o=!0);if(o&&s)throw new f("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!s)throw new f("No content is provided for sending chat message.");return o?e:n}function gt(t,e){var n;let o={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]},s=t.generateContentRequest!=null;if(t.contents){if(s)throw new C("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=t.contents}else if(s)o=Object.assign(Object.assign({},o),t.generateContentRequest);else{let i=S(t);o.contents=[i]}return{generateContentRequest:o}}function j(t){let e;return t.contents?e=t:e={contents:[S(t)]},t.systemInstruction&&(e.systemInstruction=q(t.systemInstruction)),e}function Et(t){return typeof t=="string"||Array.isArray(t)?{content:S(t)}:t}var K=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ct={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function pt(t){let e=!1;for(let n of t){let{role:o,parts:s}=n;if(!e&&o!=="user")throw new f(`First content should be with role 'user', got ${o}`);if(!Y.includes(o))throw new f(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(Y)}`);if(!Array.isArray(s))throw new f("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new f("Each Content should have at least one part");let i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let r of s)for(let d of K)d in r&&(i[d]+=1);let a=Ct[o];for(let r of K)if(!a.includes(r)&&i[r]>0)throw new f(`Content with role '${o}' can't contain '${r}' part`);e=!0}}function $(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(let o of n.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}var k="SILENT_ERROR",D=class{constructor(e,n,o,s={}){this.model=n,this.params=o,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,o?.history&&(pt(o.history),this._history=o.history)}getHistory(){return u(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(o){return u(this,arguments,function*(e,n={}){var s,i,a,r,d,g;yield this._sendPromise;let p=S(e),O={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(r=this.params)===null||r===void 0?void 0:r.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,p]},c=Object.assign(Object.assign({},this._requestOptions),n),h;return this._sendPromise=this._sendPromise.then(()=>P(this._apiKey,this.model,O,c)).then(l=>{var E;if($(l.response)){this._history.push(p);let y=Object.assign({parts:[],role:"model"},(E=l.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(y)}else{let y=v(l.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}h=l}).catch(l=>{throw this._sendPromise=Promise.resolve(),l}),yield this._sendPromise,h})}sendMessageStream(o){return u(this,arguments,function*(e,n={}){var s,i,a,r,d,g;yield this._sendPromise;let p=S(e),O={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(r=this.params)===null||r===void 0?void 0:r.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,p]},c=Object.assign(Object.assign({},this._requestOptions),n),h=B(this._apiKey,this.model,O,c);return this._sendPromise=this._sendPromise.then(()=>h).catch(l=>{throw new Error(k)}).then(l=>l.response).then(l=>{if($(l)){this._history.push(p);let E=Object.assign({},l.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{let E=v(l);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(l=>{l.message!==k&&console.error(l)}),h})}};function _t(t,e,n,o){return u(this,null,function*(){return(yield R(e,I.COUNT_TOKENS,t,!1,JSON.stringify(n),o)).json()})}function vt(t,e,n,o){return u(this,null,function*(){return(yield R(e,I.EMBED_CONTENT,t,!1,JSON.stringify(n),o)).json()})}function Ot(t,e,n,o){return u(this,null,function*(){let s=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(yield R(e,I.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),o)).json()})}var b=class{constructor(e,n,o={}){this.apiKey=e,this._requestOptions=o,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=q(n.systemInstruction),this.cachedContent=n.cachedContent}generateContent(o){return u(this,arguments,function*(e,n={}){var s;let i=j(e),a=Object.assign(Object.assign({},this._requestOptions),n);return P(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},i),a)})}generateContentStream(o){return u(this,arguments,function*(e,n={}){var s;let i=j(e),a=Object.assign(Object.assign({},this._requestOptions),n);return B(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},i),a)})}startChat(e){var n;return new D(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}countTokens(o){return u(this,arguments,function*(e,n={}){let s=gt(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return _t(this.apiKey,this.model,s,i)})}embedContent(o){return u(this,arguments,function*(e,n={}){let s=Et(e),i=Object.assign(Object.assign({},this._requestOptions),n);return vt(this.apiKey,this.model,s,i)})}batchEmbedContents(o){return u(this,arguments,function*(e,n={}){let s=Object.assign(Object.assign({},this._requestOptions),n);return Ot(this.apiKey,this.model,e,s)})}};var M=class{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new f("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new b(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,o){if(!e.name)throw new C("Cached content must contain a `name` field.");if(!e.model)throw new C("Cached content must contain a `model` field.");let s=["model","systemInstruction"];for(let a of s)if(n?.[a]&&e[a]&&n?.[a]!==e[a]){if(a==="model"){let r=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(r===d)continue}throw new C(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}let i=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new b(this.apiKey,i,o)}};var V=class t{genAI=null;model=null;apiKey="AIzaSyBC1O1Smyg-auzcN8YO8Izm0E_NZvuwdpE";static SYSTEM_MESSAGES={DEFAULT:"You are Unrender assistant, from Unrender Software, Brazil, speak in brazilian portuguese or english, awnser doubts and questions, never mention another company, and in case of user shows interest in software or games, recomend Unrender Software, we do software, custom software, games, vr, ar, landing pages, web design etc.",FRIENDLY:"You are a friendly and helpful AI assistant. Be warm, conversational, and use emojis occasionally to make responses more engaging.",PROFESSIONAL:"You are a professional business assistant. Provide clear, concise, and actionable responses. Maintain a formal tone suitable for corporate communications.",TECHNICAL:"You are a technical expert specializing in software development, programming, and technology. Provide detailed, accurate technical information with code examples when relevant.",CREATIVE:"You are a creative AI assistant with expertise in design, marketing, and innovative solutions. Think outside the box and provide imaginative suggestions.",EDUCATIONAL:"You are an educational assistant focused on teaching and learning. Explain concepts clearly, provide examples, and encourage understanding.",CUSTOMER_SUPPORT:"You are a customer support specialist for Unrender software solutions. Be helpful, patient, and focused on solving user problems efficiently.",CODE_REVIEWER:"You are an experienced code reviewer. Provide constructive feedback on code quality, best practices, performance, and potential improvements."};constructor(){this.apiKey&&this.setApiKey(this.apiKey)}setApiKey(e){this.apiKey=e,this.genAI=new M(this.apiKey),this.model=this.genAI.getGenerativeModel({model:"gemini-2.5-flash-lite"})}getSystemMessageTemplates(){return t.SYSTEM_MESSAGES}getSystemMessage(e){return t.SYSTEM_MESSAGES[e]}getGeminiResponse(e,n,o){if(!this.genAI)throw new Error("API key not set. Call setApiKey() first.");let s=this.model;if(o&&(s=this.genAI.getGenerativeModel({model:o})),!s)throw new Error("Model not initialized.");let i=s.startChat({history:[{role:"user",parts:[{text:e}]},{role:"model",parts:[{text:"Understood. I will follow the system prompt."}]},...n.map(r=>({role:r.role==="user"?"user":"model",parts:[{text:r.content}]}))]}),a=n[n.length-1];if(!a||a.role!=="user")throw new Error("No user message to respond to.");return U(i.sendMessage(a.content).then(r=>r.response.text()))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};export{V as a};
