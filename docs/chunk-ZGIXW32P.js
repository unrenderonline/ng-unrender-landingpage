import{A as Ve,Ca as ue,D as N,Da as Ke,Ea as Ge,Fa as _e,Ka as Ue,La as We,O as U,S as j,T as $,X as ce,Z as Be,qa as he}from"./chunk-5G74E3B7.js";import{Ca as Ze,Ja as qe,fa as Ye,u as Je,xa as Qe}from"./chunk-APBCXCJV.js";import{a as ze,b as Xe}from"./chunk-2PWV3ZRO.js";import"./chunk-7NMITLUU.js";import{l as Fe,r as Ie}from"./chunk-X7Q72NDQ.js";import{$a as Te,Bb as ne,Cb as re,Db as ae,Eb as Ae,Lb as He,Ma as te,Na as V,Oa as ie,Pb as oe,Rb as le,Ta as se,Ub as De,Vb as Ne,Wb as je,a as d,b as S,ca as Le,da as Pe,eb as Me,ib as ke,yc as $e}from"./chunk-Z4PMJ25B.js";var p=o=>typeof o=="string",W=()=>{let o,e,t=new Promise((s,i)=>{o=s,e=i});return t.resolve=o,t.reject=e,t},et=o=>o==null?"":""+o,yt=(o,e,t)=>{o.forEach(s=>{e[s]&&(t[s]=e[s])})},xt=/###/g,tt=o=>o&&o.indexOf("###")>-1?o.replace(xt,"."):o,it=o=>!o||p(o),z=(o,e,t)=>{let s=p(e)?e.split("."):e,i=0;for(;i<s.length-1;){if(it(o))return{};let n=tt(s[i]);!o[n]&&t&&(o[n]=new t),Object.prototype.hasOwnProperty.call(o,n)?o=o[n]:o={},++i}return it(o)?{}:{obj:o,k:tt(s[i])}},st=(o,e,t)=>{let{obj:s,k:i}=z(o,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let n=e[e.length-1],r=e.slice(0,e.length-1),a=z(o,r,Object);for(;a.obj===void 0&&r.length;)n=`${r[r.length-1]}.${n}`,r=r.slice(0,r.length-1),a=z(o,r,Object),a?.obj&&typeof a.obj[`${a.k}.${n}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${n}`]=t},vt=(o,e,t,s)=>{let{obj:i,k:n}=z(o,e,Object);i[n]=i[n]||[],i[n].push(t)},Q=(o,e)=>{let{obj:t,k:s}=z(o,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},bt=(o,e,t)=>{let s=Q(o,t);return s!==void 0?s:Q(e,t)},ut=(o,e,t)=>{for(let s in e)s!=="__proto__"&&s!=="constructor"&&(s in o?p(o[s])||o[s]instanceof String||p(e[s])||e[s]instanceof String?t&&(o[s]=e[s]):ut(o[s],e[s],t):o[s]=e[s]);return o},B=o=>o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},wt=o=>p(o)?o.replace(/[&<>"'\/]/g,e=>Et[e]):o,pe=class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let t=this.regExpMap.get(e);if(t!==void 0)return t;let s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}},St=[" ",",","?","!",";"],Ot=new pe(20),Ct=(o,e,t)=>{e=e||"",t=t||"";let s=St.filter(r=>e.indexOf(r)<0&&t.indexOf(r)<0);if(s.length===0)return!0;let i=Ot.getRegExp(`(${s.map(r=>r==="?"?"\\?":r).join("|")})`),n=!i.test(o);if(!n){let r=o.indexOf(t);r>0&&!i.test(o.substring(0,r))&&(n=!0)}return n},ge=(o,e,t=".")=>{if(!o)return;if(o[e])return Object.prototype.hasOwnProperty.call(o,e)?o[e]:void 0;let s=e.split(t),i=o;for(let n=0;n<s.length;){if(!i||typeof i!="object")return;let r,a="";for(let l=n;l<s.length;++l)if(l!==n&&(a+=t),a+=s[l],r=i[a],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&l<s.length-1)continue;n+=l-n+1;break}i=r}return i},X=o=>o?.replace("_","-"),Rt={type:"logger",log(o){this.output("log",o)},warn(o){this.output("warn",o)},error(o){this.output("error",o)},output(o,e){console?.[o]?.apply?.(console,e)}},me=class o{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Rt,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(p(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new o(this.logger,d({prefix:`${this.prefix}:${e}:`},this.options))}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new o(this.logger,e)}},M=new me,K=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);let i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,n])=>{for(let r=0;r<n;r++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,n])=>{for(let r=0;r<n;r++)i.apply(i,[e,...t])})}},Z=class extends K{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){let t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,i={}){let n=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,r=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure,a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],s&&(Array.isArray(s)?a.push(...s):p(s)&&n?a.push(...s.split(n)):a.push(s)));let l=Q(this.data,a);return!l&&!t&&!s&&e.indexOf(".")>-1&&(e=a[0],t=a[1],s=a.slice(2).join(".")),l||!r||!p(s)?l:ge(this.data?.[e]?.[t],s,n)}addResource(e,t,s,i,n={silent:!1}){let r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,a=[e,t];s&&(a=a.concat(r?s.split(r):s)),e.indexOf(".")>-1&&(a=e.split("."),i=t,t=a[1]),this.addNamespaces(t),st(this.data,a,i),n.silent||this.emit("added",e,t,s,i)}addResources(e,t,s,i={silent:!1}){for(let n in s)(p(s[n])||Array.isArray(s[n]))&&this.addResource(e,t,n,s[n],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,n,r={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),i=s,s=t,t=a[1]),this.addNamespaces(t);let l=Q(this.data,a)||{};r.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?ut(l,s,n):l=d(d({},l),s),st(this.data,a,l),r.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}},dt={processors:{},addPostProcessor(o){this.processors[o.name]=o},handle(o,e,t,s,i){return o.forEach(n=>{e=this.processors[n]?.process(e,t,s,i)??e}),e}},ft=Symbol("i18next/PATH_KEY");function Lt(){let o=[],e=Object.create(null),t;return e.get=(s,i)=>(t?.revoke?.(),i===ft?o:(o.push(i),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function ye(o,e){let{[ft]:t}=o(Lt());return t.join(e?.keySeparator??".")}var nt={},de=o=>!p(o)&&typeof o!="boolean"&&typeof o!="number",q=class o extends K{constructor(e,t={}){super(),yt(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=M.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){let s=d({},t);if(e==null)return!1;let i=this.resolve(e,s);if(i?.res===void 0)return!1;let n=de(i.res);return!(s.returnObjects===!1&&n)}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");let i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,n=t.ns||this.options.defaultNS||[],r=s&&e.indexOf(s)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Ct(e,s,i);if(r&&!a){let l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:p(n)?[n]:n};let c=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(c[0])>-1)&&(n=c.shift()),e=c.join(i)}return{key:e,namespaces:p(n)?[n]:n}}translate(e,t,s){let i=typeof t=="object"?d({},t):t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i=d({},i)),i||(i={}),e==null)return"";typeof e=="function"&&(e=ye(e,d(d({},this.options),i))),Array.isArray(e)||(e=[String(e)]);let n=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],i),c=l[l.length-1],h=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");let u=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u?.toLowerCase()==="cimode")return m?n?{res:`${c}${h}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:`${c}${h}${a}`:n?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:a;let g=this.resolve(e,i),f=g?.res,x=g?.usedKey||a,y=g?.exactUsedKey||a,E=["[object Number]","[object Function]","[object RegExp]"],b=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,w=i.count!==void 0&&!p(i.count),A=o.hasDefaultValue(i),F=w?this.pluralResolver.getSuffix(u,i.count,i):"",I=i.ordinal&&w?this.pluralResolver.getSuffix(u,i.count,{ordinal:!1}):"",Se=w&&!i.ordinal&&i.count===0,H=Se&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${F}`]||i[`defaultValue${I}`]||i.defaultValue,L=f;C&&!f&&A&&(L=H);let gt=de(L),mt=Object.prototype.toString.apply(L);if(C&&L&&gt&&E.indexOf(mt)<0&&!(p(b)&&Array.isArray(L))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,L,S(d({},i),{ns:l})):`key '${a} (${this.language})' returned an object instead of string.`;return n?(g.res=P,g.usedParams=this.getUsedParamsDetails(i),g):P}if(r){let P=Array.isArray(L),R=P?[]:{},Oe=P?y:x;for(let T in L)if(Object.prototype.hasOwnProperty.call(L,T)){let k=`${Oe}${r}${T}`;A&&!f?R[T]=this.translate(k,S(d({},i),{defaultValue:de(H)?H[T]:void 0,joinArrays:!1,ns:l})):R[T]=this.translate(k,S(d({},i),{joinArrays:!1,ns:l})),R[T]===k&&(R[T]=L[T])}f=R}}else if(C&&p(b)&&Array.isArray(f))f=f.join(b),f&&(f=this.extendTranslation(f,e,i,s));else{let P=!1,R=!1;!this.isValidLookup(f)&&A&&(P=!0,f=H),this.isValidLookup(f)||(R=!0,f=a);let T=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&R?void 0:f,k=A&&H!==f&&this.options.updateMissing;if(R||P||k){if(this.logger.log(k?"updateKey":"missingKey",u,c,a,k?H:f),r){let O=this.resolve(a,S(d({},i),{keySeparator:!1}));O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let G=[],J=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&J&&J[0])for(let O=0;O<J.length;O++)G.push(J[O]);else this.options.saveMissingTo==="all"?G=this.languageUtils.toResolveHierarchy(i.lng||this.language):G.push(i.lng||this.language);let Ce=(O,D,_)=>{let Re=A&&_!==f?_:T;this.options.missingKeyHandler?this.options.missingKeyHandler(O,c,D,Re,k,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(O,c,D,Re,k,i),this.emit("missingKey",O,c,D,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?G.forEach(O=>{let D=this.pluralResolver.getSuffixes(O,i);Se&&i[`defaultValue${this.options.pluralSeparator}zero`]&&D.indexOf(`${this.options.pluralSeparator}zero`)<0&&D.push(`${this.options.pluralSeparator}zero`),D.forEach(_=>{Ce([O],a+_,i[`defaultValue${_}`]||H)})}):Ce(G,a,H))}f=this.extendTranslation(f,e,i,g,s),R&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${c}${h}${a}`),(R||P)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${h}${a}`:a,P?f:void 0,i))}return n?(g.res=f,g.usedParams=this.getUsedParamsDetails(i),g):f}extendTranslation(e,t,s,i,n){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,d(d({},this.options.interpolation.defaultVariables),s),s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init(S(d({},s),{interpolation:d(d({},this.options.interpolation),s.interpolation)}));let l=p(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(l){let u=e.match(this.interpolator.nestingRegexp);c=u&&u.length}let h=s.replace&&!p(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(h=d(d({},this.options.interpolation.defaultVariables),h)),e=this.interpolator.interpolate(e,h,s.lng||this.language||i.usedLng,s),l){let u=e.match(this.interpolator.nestingRegexp),m=u&&u.length;c<m&&(s.nest=!1)}!s.lng&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...u)=>n?.[0]===u[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${u[0]} in key: ${t[0]}`),null):this.translate(...u,t),s)),s.interpolation&&this.interpolator.reset()}let r=s.postProcess||this.options.postProcess,a=p(r)?[r]:r;return e!=null&&a?.length&&s.applyPostProcessor!==!1&&(e=dt.handle(a,e,t,this.options&&this.options.postProcessPassResolved?d({i18nResolved:S(d({},i),{usedParams:this.getUsedParamsDetails(s)})},s):s,this)),e}resolve(e,t={}){let s,i,n,r,a;return p(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(s))return;let c=this.extractFromKey(l,t),h=c.key;i=h;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));let m=t.count!==void 0&&!p(t.count),g=m&&!t.ordinal&&t.count===0,f=t.context!==void 0&&(p(t.context)||typeof t.context=="number")&&t.context!=="",x=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);u.forEach(y=>{this.isValidLookup(s)||(a=y,!nt[`${x[0]}-${y}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(nt[`${x[0]}-${y}`]=!0,this.logger.warn(`key "${i}" for languages "${x.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(E=>{if(this.isValidLookup(s))return;r=E;let b=[h];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(b,h,E,y,t);else{let w;m&&(w=this.pluralResolver.getSuffix(E,t.count,t));let A=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(t.ordinal&&w.indexOf(F)===0&&b.push(h+w.replace(F,this.options.pluralSeparator)),b.push(h+w),g&&b.push(h+A)),f){let I=`${h}${this.options.contextSeparator||"_"}${t.context}`;b.push(I),m&&(t.ordinal&&w.indexOf(F)===0&&b.push(I+w.replace(F,this.options.pluralSeparator)),b.push(I+w),g&&b.push(I+A))}}let C;for(;C=b.pop();)this.isValidLookup(s)||(n=C,s=this.getResource(E,y,C,t))}))})}),{res:s,usedKey:i,exactUsedKey:n,usedLng:r,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(e={}){let t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!p(e.replace),i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i=d(d({},this.options.interpolation.defaultVariables),i)),!s){i=d({},i);for(let n of t)delete i[n]}return i}static hasDefaultValue(e){let t="defaultValue";for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}},ee=class{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=M.create("languageUtils")}getScriptPartFromCode(e){if(e=X(e),!e||e.indexOf("-")<0)return null;let t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=X(e),!e||e.indexOf("-")<0)return e;let t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(p(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;let i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;let i=this.getScriptPartFromCode(s);if(this.isSupportedCode(i))return t=i;let n=this.getLanguagePartFromCode(s);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(r=>{if(r===n)return r;if(!(r.indexOf("-")<0&&n.indexOf("-")<0)&&(r.indexOf("-")>0&&n.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===n||r.indexOf(n)===0&&n.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),p(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){let s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],n=r=>{r&&(this.isSupportedCode(r)?i.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return p(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&n(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&n(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&n(this.getLanguagePartFromCode(e))):p(e)&&n(this.formatLanguageCode(e)),s.forEach(r=>{i.indexOf(r)<0&&n(this.formatLanguageCode(r))}),i}},rt={zero:0,one:1,two:2,few:3,many:4,other:5},at={select:o=>o===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})},xe=class{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=M.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){let s=X(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:s,type:i});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let r;try{r=new Intl.PluralRules(s,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),at;if(!e.match(/-|_/))return at;let l=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(l,t)}return this.pluralRulesCache[n]=r,r}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((i,n)=>rt[i]-rt[n]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,s={}){let i=this.getRule(e,s);return i?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}},ot=(o,e,t,s=".",i=!0)=>{let n=bt(o,e,t);return!n&&i&&p(t)&&(n=ge(o,t,s),n===void 0&&(n=ge(e,t,s))),n},fe=o=>o.replace(/\$/g,"$$$$"),ve=class{constructor(e={}){this.logger=M.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});let{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:n,prefixEscaped:r,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:u,nestingPrefix:m,nestingPrefixEscaped:g,nestingSuffix:f,nestingSuffixEscaped:x,nestingOptionsSeparator:y,maxReplaces:E,alwaysFormat:b}=e.interpolation;this.escape=t!==void 0?t:wt,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=n?B(n):r||"{{",this.suffix=a?B(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=m?B(m):g||B("$t("),this.nestingSuffix=f?B(f):x||B(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=E||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,i){let n,r,a,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=g=>{if(g.indexOf(this.formatSeparator)<0){let E=ot(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,s,S(d(d({},i),t),{interpolationkey:g})):E}let f=g.split(this.formatSeparator),x=f.shift().trim(),y=f.join(this.formatSeparator).trim();return this.format(ot(t,l,x,this.options.keySeparator,this.options.ignoreJSONStructure),y,s,S(d(d({},i),t),{interpolationkey:x}))};this.resetRegExp();let h=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>fe(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?fe(this.escape(g)):fe(g)}].forEach(g=>{for(a=0;n=g.regex.exec(e);){let f=n[1].trim();if(r=c(f),r===void 0)if(typeof h=="function"){let y=h(e,n,i);r=p(y)?y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,f))r="";else if(u){r=n[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${e}`),r="";else!p(r)&&!this.useRawValueToEscape&&(r=et(r));let x=g.safeValue(r);if(e=e.replace(n[0],x),u?(g.regex.lastIndex+=r.length,g.regex.lastIndex-=n[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,s={}){let i,n,r,a=(l,c)=>{let h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;let u=l.split(new RegExp(`${h}[ ]*{`)),m=`{${u[1]}`;l=u[0],m=this.interpolate(m,r);let g=m.match(/'/g),f=m.match(/"/g);((g?.length??0)%2===0&&!f||f.length%2!==0)&&(m=m.replace(/'/g,'"'));try{r=JSON.parse(m),c&&(r=d(d({},c),r))}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,x),`${l}${h}${m}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];r=d({},s),r=r.replace&&!p(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let c=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(c!==-1&&(l=i[1].slice(c).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),i[1]=i[1].slice(0,c)),n=t(a.call(this,i[1].trim(),r),r),n&&i[0]===e&&!p(n))return n;p(n)||(n=et(n)),n||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),n=""),l.length&&(n=l.reduce((h,u)=>this.format(h,u,s.lng,S(d({},s),{interpolationkey:i[1].trim()})),n.trim())),e=e.replace(i[0],n),this.regexp.lastIndex=0}return e}},Pt=o=>{let e=o.toLowerCase().trim(),t={};if(o.indexOf("(")>-1){let s=o.split("(");e=s[0].toLowerCase().trim();let i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(r=>{if(r){let[a,...l]=r.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();t[h]||(t[h]=c),c==="false"&&(t[h]=!1),c==="true"&&(t[h]=!0),isNaN(c)||(t[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},lt=o=>{let e={};return(t,s,i)=>{let n=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(n=S(d({},n),{[i.interpolationkey]:void 0}));let r=s+JSON.stringify(n),a=e[r];return a||(a=o(X(s),i),e[r]=a),a(t)}},Tt=o=>(e,t,s)=>o(X(t),s)(e),be=class{constructor(e={}){this.logger=M.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";let s=t.cacheInBuiltFormats?lt:Tt;this.formats={number:s((i,n)=>{let r=new Intl.NumberFormat(i,d({},n));return a=>r.format(a)}),currency:s((i,n)=>{let r=new Intl.NumberFormat(i,S(d({},n),{style:"currency"}));return a=>r.format(a)}),datetime:s((i,n)=>{let r=new Intl.DateTimeFormat(i,d({},n));return a=>r.format(a)}),relativetime:s((i,n)=>{let r=new Intl.RelativeTimeFormat(i,d({},n));return a=>r.format(a,n.range||"day")}),list:s((i,n)=>{let r=new Intl.ListFormat(i,d({},n));return a=>r.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=lt(t)}format(e,t,s,i={}){let n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(a=>a.indexOf(")")>-1)){let a=n.findIndex(l=>l.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,a)].join(this.formatSeparator)}return n.reduce((a,l)=>{let{formatName:c,formatOptions:h}=Pt(l);if(this.formats[c]){let u=a;try{let m=i?.formatParams?.[i.interpolationkey]||{},g=m.locale||m.lng||i.locale||i.lng||s;u=this.formats[c](a,g,d(d(d({},h),i),m))}catch(m){this.logger.warn(m)}return u}else this.logger.warn(`there was no format function for ${c}`);return a},e)}},Mt=(o,e)=>{o.pending[e]!==void 0&&(delete o.pending[e],o.pendingCount--)},Ee=class extends K{constructor(e,t,s,i={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=M.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,i.backend,i)}queueLoad(e,t,s,i){let n={},r={},a={},l={};return e.forEach(c=>{let h=!0;t.forEach(u=>{let m=`${c}|${u}`;!s.reload&&this.store.hasResourceBundle(c,u)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?r[m]===void 0&&(r[m]=!0):(this.state[m]=1,h=!1,r[m]===void 0&&(r[m]=!0),n[m]===void 0&&(n[m]=!0),l[u]===void 0&&(l[u]=!0)))}),h||(a[c]=!0)}),(Object.keys(n).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(n),pending:Object.keys(r),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,t,s){let i=e.split("|"),n=i[0],r=i[1];t&&this.emit("failedLoading",n,r,t),!t&&s&&this.store.addResourceBundle(n,r,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);let a={};this.queue.forEach(l=>{vt(l.loaded,[n],r),Mt(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});let h=l.loaded[c];h.length&&h.forEach(u=>{a[c][u]===void 0&&(a[c][u]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,t,s,i=0,n=this.retryTimeout,r){if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:n,callback:r});return}this.readingCalls++;let a=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){let u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(c&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,n*2,r)},n);return}r(c,h)},l=this.backend[s].bind(this.backend);if(l.length===2){try{let c=l(e,t);c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,t,a)}prepareLoading(e,t,s={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();p(e)&&(e=this.languageUtils.toResolveHierarchy(e)),p(t)&&(t=[t]);let n=this.queueLoad(e,t,s,i);if(!n.toLoad.length)return n.pending.length||i(),null;n.toLoad.forEach(r=>{this.loadOne(r)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){let s=e.split("|"),i=s[0],n=s[1];this.read(i,n,"read",void 0,void 0,(r,a)=>{r&&this.logger.warn(`${t}loading namespace ${n} for language ${i} failed`,r),!r&&a&&this.logger.log(`${t}loaded namespace ${n} for language ${i}`,a),this.loaded(e,r,a)})}saveMissing(e,t,s,i,n,r={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){let l=S(d({},r),{isUpdate:n}),c=this.backend.create.bind(this.backend);if(c.length<6)try{let h;c.length===5?h=c(e,t,s,i,l):h=c(e,t,s,i),h&&typeof h.then=="function"?h.then(u=>a(null,u)).catch(a):a(null,h)}catch(h){a(h)}else c(e,t,s,i,a,l)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}},ct=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:o=>{let e={};if(typeof o[1]=="object"&&(e=o[1]),p(o[1])&&(e.defaultValue=o[1]),p(o[2])&&(e.tDescription=o[2]),typeof o[2]=="object"||typeof o[3]=="object"){let t=o[3]||o[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:o=>o,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ht=o=>(p(o.ns)&&(o.ns=[o.ns]),p(o.fallbackLng)&&(o.fallbackLng=[o.fallbackLng]),p(o.fallbackNS)&&(o.fallbackNS=[o.fallbackNS]),o.supportedLngs?.indexOf?.("cimode")<0&&(o.supportedLngs=o.supportedLngs.concat(["cimode"])),typeof o.initImmediate=="boolean"&&(o.initAsync=o.initImmediate),o),Y=()=>{},kt=o=>{Object.getOwnPropertyNames(Object.getPrototypeOf(o)).forEach(t=>{typeof o[t]=="function"&&(o[t]=o[t].bind(o))})},we=class o extends K{constructor(e={},t){if(super(),this.options=ht(e),this.services={},this.logger=M,this.modules={external:[]},kt(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(p(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));let s=ct();this.options=d(d(d({},s),this.options),ht(e)),this.options.interpolation=d(d({},s.interpolation),this.options.interpolation),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);let i=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?M.init(i(this.modules.logger),this.options):M.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=be;let h=new ee(this.options);this.store=new Z(this.options.resources,this.options);let u=this.services;u.logger=M,u.resourceStore=this.store,u.languageUtils=h,u.pluralResolver=new xe(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(u.formatter=i(c),u.formatter.init&&u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new ve(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new Ee(i(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(g,...f)=>{this.emit(g,...f)}),this.modules.languageDetector&&(u.languageDetector=i(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=i(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new q(this.services,this.options),this.translator.on("*",(g,...f)=>{this.emit(g,...f)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Y),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...h)=>this.store[c](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...h)=>(this.store[c](...h),this)});let a=W(),l=()=>{let c=(h,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(u),t(h,u)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,t=Y){let s=t,i=p(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();let n=[],r=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&n.indexOf(c)<0&&n.push(c)})};i?r(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>r(l)),this.options.preload?.forEach?.(a=>r(a)),this.services.backendConnector.load(n,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(a)})}else s(null)}reloadResources(e,t,s){let i=W();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Y),this.services.backendConnector.reload(e,t,n=>{i.resolve(),s(n)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&dt.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){let s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;let s=W();this.emit("languageChanging",e);let i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},n=(a,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,s.resolve((...c)=>this.t(...c)),t&&t(a,(...c)=>this.t(...c))},r=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);let l=p(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(p(a)?[a]:a);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector?.cacheUserLanguage?.(c)),this.loadResources(c,h=>{n(h,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?r(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(r):this.services.languageDetector.detect(r):r(e),s}getFixedT(e,t,s){let i=(n,r,...a)=>{let l;typeof r!="object"?l=this.options.overloadTranslationOptionHandler([n,r].concat(a)):l=d({},r),l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||s||i.keyPrefix);let c=this.options.keySeparator||".",h;return l.keyPrefix&&Array.isArray(n)?h=n.map(u=>(typeof u=="function"&&(u=ye(u,d(d({},this.options),r))),`${l.keyPrefix}${c}${u}`)):(typeof n=="function"&&(n=ye(n,d(d({},this.options),r))),h=l.keyPrefix?`${l.keyPrefix}${c}${n}`:n),this.t(h,l)};return p(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=s,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,n=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;let r=(a,l)=>{let c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(t.precheck){let a=t.precheck(this,r);if(a!==void 0)return a}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(s,e)&&(!i||r(n,e)))}loadNamespaces(e,t){let s=W();return this.options.ns?(p(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){let s=W();p(e)&&(e=[e]);let i=this.options.preload||[],n=e.filter(r=>i.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return n.length?(this.options.preload=i.concat(n),this.loadResources(r=>{s.resolve(),t&&t(r)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{let i=new Intl.Locale(e);if(i&&i.getTextInfo){let n=i.getTextInfo();if(n&&n.direction)return n.direction}}catch{}let t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new ee(ct());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){let s=new o(e,t);return s.createInstance=o.createInstance,s}cloneInstance(e={},t=Y){let s=e.forkResourceStore;s&&delete e.forkResourceStore;let i=S(d(d({},this.options),e),{isClone:!0}),n=new o(i);if((e.debug!==void 0||e.prefix!==void 0)&&(n.logger=n.logger.clone(e)),["store","services","language"].forEach(a=>{n[a]=this[a]}),n.services=d({},this.services),n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},s){let a=Object.keys(this.store.data).reduce((l,c)=>(l[c]=d({},this.store.data[c]),l[c]=Object.keys(l[c]).reduce((h,u)=>(h[u]=d({},l[c][u]),h),l[c]),l),{});n.store=new Z(a,i),n.services.resourceStore=n.store}return n.translator=new q(n.services,i),n.translator.on("*",(a,...l)=>{n.emit(a,...l)}),n.init(i,t),n.translator.options=i,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},v=we.createInstance(),Dt=v.createInstance,Nt=v.dir,jt=v.init,$t=v.loadResources,Ft=v.reloadResources,It=v.use,Vt=v.changeLanguage,Bt=v.getFixedT,Kt=v.t,Gt=v.exists,_t=v.setDefaultNamespace,Ut=v.hasLoadedNamespace,Wt=v.loadNamespaces,zt=v.loadLanguages;var At=["gameContainer"];function Ht(o,e){if(o&1){let t=He();re(0,"button",4),oe("click",function(i){Le(t);let n=le();return i.stopPropagation(),Pe(n.restartGame())}),Ae(1,"fa-icon",5),ae()}if(o&2){let t=le();ie(),ne("icon",t.faRedo)}}var pt=class o{constructor(e,t){this.cdr=e;this.ngZone=t;this.initTranslations()}gameContainer;score=0;lives=3;wave=1;hasDoneDamage=!1;faHeart=Je;faRedo=qe;faArrowLeft=Ze;faArrowRight=Ye;faCrosshairs=Qe;scene;camera;renderer;raycaster=new Ue;player;enemies=[];projectiles=[];particles=[];buttonHitboxes=[];buttonShakeTimers=[0,0,0,0];buttonOriginalPositions=[];buttonScreenPositions=[];targetPlayerX=0;enemyMoveTimer=0;diveAttackTimer=0;animationFrameId=0;isMobile=!1;isGameWon=!1;hitSound;shootSound;startSound;winSound;t(e){return v.t(e)}initTranslations(){let e=navigator.language.startsWith("pt")?"pt-BR":"en";this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768,v.init({lng:e,fallbackLng:"en",resources:{"pt-BR":{translation:{title:"Arcade Espacial Three.js",score:"SCORE",lives:"",wave:"WAVE",instruction:"Move mouse \u2022 Click to shoot",gameOver:"GAME OVER",finalScore:"Final Score:",playAgain:"Play Again",spaceArcade:"SPACE ARCADE",description:"Destroy the voxel enemies before they reach you!",startGame:"START GAME"}},en:{translation:{title:"Three.js Space Arcade",score:"SCORE",lives:"",wave:"WAVE",instruction:"Move mouse \u2022 Click to shoot",gameOver:"GAME OVER",finalScore:"Final Score:",playAgain:"Play Again",spaceArcade:"SPACE ARCADE",description:"Destroy the voxel enemies before they reach you!",startGame:"START GAME"}}}},(t,s)=>{this.isMobile&&v.addResourceBundle(e,"translation",{description:e==="pt-BR"?"Destrua os inimigos voxel!":"Destroy the voxel enemies!",instruction:e==="pt-BR"?"Mova \u2022 Toque para atirar":"Move \u2022 Tap to shoot"},!0,!0)})}ngAfterViewInit(){this.initAudio(),this.ngZone.runOutsideAngular(()=>{this.initScene(),this.createPlayer(),this.setupLighting(),this.startGame(),this.setupIntersectionObserver(),this.onResize()})}initAudio(){typeof Audio<"u"&&(this.hitSound=new Audio("hit.m4a"),this.shootSound=new Audio("shoot.m4a"),this.startSound=new Audio("game%20start.m4a"),this.winSound=new Audio("game%20win.m4a"),this.hitSound.volume=.2,this.shootSound.volume=.05,this.startSound.volume=.1,this.winSound.volume=.1,this.hitSound.load(),this.shootSound.load(),this.startSound.load(),this.winSound.load())}playAudio(e){e&&(e.currentTime=0,e.play().catch(t=>console.warn("Audio play failed",t)))}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.intersectionObserver&&this.intersectionObserver.disconnect();try{this.scene.traverse(e=>{let t=e;t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material:[t.material]).forEach(i=>{i.map&&i.map.dispose(),i.dispose()})}),this.renderer.dispose(),this.scene.clear()}catch(e){console.error("Error during Three.js cleanup:",e)}}intersectionObserver;setupIntersectionObserver(){this.gameContainer?.nativeElement&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting?this.animationFrameId||this.animate():this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0)})}),this.intersectionObserver.observe(this.gameContainer.nativeElement))}onResize(){let e=this.gameContainer.nativeElement.getBoundingClientRect(),t=e.width,s=e.height,i=t/s;if(!this.camera)return;let r=t<1024?.5:0;i>1?(this.camera.left=-4*i+r,this.camera.right=4*i-r,this.camera.top=3,this.camera.bottom=-3):(this.camera.left=-4+r,this.camera.right=4-r,this.camera.top=3/i,this.camera.bottom=-3/i),this.camera.updateProjectionMatrix(),this.renderer.setSize(t,s),this.enemies.length>0&&this.createEnemyFormation()}onMouseMove(e){let t=e.target;if(t&&t.tagName==="BUTTON"||!this.camera||!this.gameContainer)return;let s=this.gameContainer.nativeElement.getBoundingClientRect(),n=(e.clientX-s.left)/s.width,r=this.camera.right-this.camera.left;this.targetPlayerX=n*r+this.camera.left,this.targetPlayerX=Math.max(this.camera.left,Math.min(this.camera.right,this.targetPlayerX))}onClick(e){let t=e.target;if(t&&t.tagName==="BUTTON"||!this.camera||!this.gameContainer)return;let s=this.gameContainer.nativeElement.getBoundingClientRect(),n=(e.clientX-s.left)/s.width,r=this.camera.right-this.camera.left,a=n*r+this.camera.left,l=Math.max(this.camera.left,Math.min(this.camera.right,a));this.targetPlayerX=l,this.player.position.x=l,this.shoot()}onTouchStart(e){let t=e.target;if(t&&t.tagName==="BUTTON"||!this.camera||!this.gameContainer)return;e.preventDefault();let s=e.touches[0],i=this.gameContainer.nativeElement.getBoundingClientRect(),r=(s.clientX-i.left)/i.width,a=this.camera.right-this.camera.left,l=r*a+this.camera.left,c=Math.max(this.camera.left,Math.min(this.camera.right,l));this.targetPlayerX=c,this.player.position.x=c,this.shoot()}onTouchMove(e){let t=e.target;if(t&&t.tagName==="BUTTON"||!this.camera||!this.gameContainer)return;e.preventDefault();let s=e.touches[0],i=this.gameContainer.nativeElement.getBoundingClientRect(),r=(s.clientX-i.left)/i.width,a=this.camera.right-this.camera.left;this.targetPlayerX=r*a+this.camera.left,this.targetPlayerX=Math.max(this.camera.left,Math.min(this.camera.right,this.targetPlayerX))}onDeviceOrientation(e){if(!this.isMobile||!this.camera)return;let t=e.gamma||0,s=(this.camera.right-this.camera.left)/2,i=(this.camera.right+this.camera.left)/2;this.targetPlayerX=t/90*s+i,this.targetPlayerX=Math.max(this.camera.left,Math.min(this.camera.right,this.targetPlayerX))}onKeyDown(e){let t=e.target;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return;switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","KeyA","KeyD","KeyW","KeyS"].includes(e.code)&&e.preventDefault(),e.code){case"ArrowLeft":case"KeyA":this.moveLeft();break;case"ArrowRight":case"KeyD":this.moveRight();break;case"ArrowUp":case"ArrowDown":case"KeyW":case"KeyS":this.shoot();break}}initScene(){this.scene=new Be,this.scene.background=null,this.camera=new Ke(-4,4,3,-3,.1,1e3),this.camera.position.set(0,0,10),this.renderer=new We({antialias:!0,alpha:!0});let e=this.gameContainer.nativeElement.clientWidth||window.innerWidth,t=this.gameContainer.nativeElement.clientHeight||window.innerHeight;this.renderer.setSize(e,t),this.gameContainer.nativeElement.appendChild(this.renderer.domElement)}startGame(){this.wave=1,this.score=0,this.lives=3,this.hasDoneDamage=!1,this.createEnemyFormation()}restartGame(){this.playAudio(this.startSound),[...this.enemies,...this.projectiles,...this.particles].forEach(e=>{this.scene.remove(e)}),this.enemies=[],this.projectiles=[],this.particles=[],this.startGame()}createButtonHitboxes(){this.buttonHitboxes.forEach(t=>this.scene.remove(t)),this.buttonHitboxes=[],this.buttonOriginalPositions=[];let e=[{x:16,y:16,width:48,height:48},{x:80,y:16,width:48,height:48},{x:144,y:16,width:48,height:48},{x:16,y:80,width:48,height:48}];this.buttonScreenPositions=e}shakeButton(e){let t=this.buttonScreenPositions[e],s=this.renderer.domElement,i=((t.x+t.width/2)/s.clientWidth-.5)*2*4,n=-((t.y+t.height/2)/s.clientHeight-.5)*2*3;this.createButtonHitEffect(new N(i,n,0))}createButtonHitEffect(e){for(let a=0;a<6;a++){let l=new j(new $(.03,.03,.03),new U({color:16755200}));l.position.copy(e),l.userData={velocity:new N((Math.random()-.5)*.2,(Math.random()-.5)*.2,(Math.random()-.5)*.2),life:20,radius:.03/2},this.scene.add(l),this.particles.push(l)}}createVoxelModel(e,t,s){let i=new ce;return e.forEach(n=>{let r=new j(new $(s,s,s),new he({color:t}));r.position.set(n[0]*s,n[1]*s,n[2]*s),i.add(r)}),i}createPlayer(){let e=[[0,0,0],[-1,0,0],[1,0,0],[0,1,0]],t=this.createVoxelModel(e,1049884,.1);t.userData={radius:.28},this.player=t,this.player.position.y=-2.2,this.scene.add(this.player)}setupLighting(){this.scene.add(new _e(4210752,.6));let e=new Ge(16777215,.8);e.position.set(0,0,10),this.scene.add(e);let t=new ue(16711744,.12,30);t.position.set(-5,5,5),this.scene.add(t);let s=new ue(16639,.12,30);s.position.set(5,5,5),this.scene.add(s),this.createButtonHitboxes()}createEnemyFormation(){this.enemies.forEach(t=>this.scene.remove(t)),this.enemies=[],window.innerWidth<1024?(this.createVoxelTextEnemy("CHAME A ATEN\xC7\xC3O",0,2.2),this.createVoxelTextEnemy("E ENCANTE",0,1.4),this.createVoxelTextEnemy("COM INTERA\xC7\xD5ES",0,.6),this.createVoxelTextEnemy("UNICAS",0,-.2)):(this.createVoxelTextEnemy("CHAME A ATEN\xC7\xC3O E ENCANTE",0,1.8),this.createVoxelTextEnemy("COM INTERA\xC7\xD5ES UNICAS",0,.3))}createVoxelTextEnemy(e,t,s){let i=new ce,n=0,r=0,a=0;for(let y=0;y<e.length;y++){let E=e[y].toUpperCase();a+=this.getLetterWidth(E),y<e.length-1&&(a+=1)}let h=(this.camera.right-this.camera.left)*.9/a,u=window.innerWidth<1024,g=window.innerWidth<480?.06:u?.08:.12;h=Math.min(h,g);let f=h;r=a*h;for(let y=0;y<e.length;y++){let E=e[y].toUpperCase();this.getLetterBlocks(E).forEach(C=>{let w=new j(new $(h,h,h),new U({color:16098851}));w.position.set(n+C[0]*h,C[1]*h,C[2]*h),w.userData={isBlock:!0,parentText:e,radius:h*.5},i.add(w)}),n+=this.getLetterWidth(E)*h+f}let x=t-r/2;i.position.set(x,s,0),i.userData={type:"voxelText",text:e,blocks:i.children.length,destroyedBlocks:0,radius:Math.sqrt(i.children.length)*h,movementOffset:Math.random()*Math.PI*2,baseX:x,baseY:s,totalWidth:r},this.scene.add(i),this.enemies.push(i)}getLetterBlocks(e){return{A:[[1,4,0],[2,4,0],[0,3,0],[3,3,0],[0,2,0],[1,2,0],[2,2,0],[3,2,0],[0,1,0],[3,1,0],[0,0,0],[3,0,0]],C:[[1,4,0],[2,4,0],[3,4,0],[0,3,0],[0,2,0],[0,1,0],[1,0,0],[2,0,0],[3,0,0]],\u00C7:[[1,4,0],[2,4,0],[3,4,0],[0,3,0],[0,2,0],[0,1,0],[1,0,0],[2,0,0],[3,0,0],[1,-1,0],[2,-1,0]],E:[[0,4,0],[1,4,0],[2,4,0],[3,4,0],[0,3,0],[0,2,0],[1,2,0],[2,2,0],[0,1,0],[0,0,0],[1,0,0],[2,0,0],[3,0,0]],H:[[0,4,0],[3,4,0],[0,3,0],[3,3,0],[0,2,0],[1,2,0],[2,2,0],[3,2,0],[0,1,0],[3,1,0],[0,0,0],[3,0,0]],I:[[0,4,0],[1,4,0],[2,4,0],[1,3,0],[1,2,0],[1,1,0],[0,0,0],[1,0,0],[2,0,0]],M:[[0,4,0],[4,4,0],[0,3,0],[1,3,0],[3,3,0],[4,3,0],[0,2,0],[2,2,0],[4,2,0],[0,1,0],[4,1,0],[0,0,0],[4,0,0]],N:[[0,4,0],[4,4,0],[0,3,0],[1,3,0],[4,3,0],[0,2,0],[2,2,0],[4,2,0],[0,1,0],[3,1,0],[4,1,0],[0,0,0],[4,0,0]],O:[[1,4,0],[2,4,0],[0,3,0],[3,3,0],[0,2,0],[3,2,0],[0,1,0],[3,1,0],[1,0,0],[2,0,0]],R:[[0,4,0],[1,4,0],[2,4,0],[3,4,0],[0,3,0],[3,3,0],[0,2,0],[1,2,0],[2,2,0],[3,2,0],[0,1,0],[3,1,0],[0,0,0],[3,0,0],[4,0,0]],S:[[1,4,0],[2,4,0],[3,4,0],[0,3,0],[0,2,0],[1,2,0],[2,2,0],[3,2,0],[3,1,0],[0,0,0],[1,0,0],[2,0,0]],T:[[0,4,0],[1,4,0],[2,4,0],[3,4,0],[4,4,0],[2,3,0],[2,2,0],[2,1,0],[2,0,0]],U:[[0,4,0],[3,4,0],[0,3,0],[3,3,0],[0,2,0],[3,2,0],[0,1,0],[3,1,0],[1,0,0],[2,0,0]],\u00DA:[[0,4,0],[3,4,0],[0,3,0],[3,3,0],[0,2,0],[3,2,0],[0,1,0],[3,1,0],[1,0,0],[2,0,0],[1,5,0],[2,5,0]],\u00C3:[[1,4,0],[2,4,0],[0,3,0],[3,3,0],[0,2,0],[1,2,0],[2,2,0],[3,2,0],[0,1,0],[3,1,0],[0,0,0],[3,0,0],[1,5,0],[2,5,0]],\u00D5:[[1,4,0],[2,4,0],[0,3,0],[3,3,0],[0,2,0],[3,2,0],[0,1,0],[3,1,0],[1,0,0],[2,0,0],[1,5,0],[2,5,0]]," ":[]}[e]||[]}getLetterWidth(e){return{A:4,C:4,\u00C7:4,E:4,H:4,I:3,M:5,N:5,O:4,R:5,S:4,T:5,U:4,\u00DA:4,\u00C3:4,\u00D5:4," ":1}[e]||4}moveLeft(){this.targetPlayerX=Math.max(this.camera.left,this.targetPlayerX-.8)}moveRight(){this.targetPlayerX=Math.min(this.camera.right,this.targetPlayerX+.8)}shoot(){let e=Date.now();if(this.player.userData.lastShot&&e-this.player.userData.lastShot<400)return;this.player.userData.lastShot=e,this.playAudio(this.shootSound);let t=new $(.15,.15,.15),s=new he({color:16776960,emissive:11184640}),i=new j(t,s);i.position.copy(this.player.position),i.position.y+=.28,i.userData={velocity:new N(0,.8,0),radius:.1},this.scene.add(i),this.projectiles.push(i)}updatePlayer(){this.player.position.x=Ve.lerp(this.player.position.x,this.targetPlayerX,.25),this.player.position.x=Math.max(this.camera.left,Math.min(this.camera.right,this.player.position.x))}updateEnemies(){this.enemyMoveTimer++,this.diveAttackTimer++;for(let e=this.enemies.length-1;e>=0;e--){let t=this.enemies[e],{type:s,movementOffset:i,totalWidth:n}=t.userData;if(s==="voxelText"){let r=Date.now()*.001,a=n?Math.max(.2,.5-n/8):.3;t.position.x=t.userData.baseX+Math.sin(r+i)*a,t.position.y=t.userData.baseY+Math.cos(r*.7+i)*.2;for(let l=this.projectiles.length-1;l>=0;l--){let c=this.projectiles[l];for(let h=t.children.length-1;h>=0;h--){let u=t.children[h],m=new N;if(u.getWorldPosition(m),m.distanceTo(c.position)<u.userData.radius+c.userData.radius){this.createBlockParticles(m),t.remove(u),t.userData.destroyedBlocks++,this.playAudio(this.hitSound),this.score+=10,this.hasDoneDamage=!0,this.cdr.detectChanges(),this.scene.remove(c),this.projectiles.splice(l,1);break}}}if(t.children.length===0){this.scene.remove(t),this.enemies.splice(e,1);continue}}if(this.checkCollision(t,this.player)){this.lives--,this.createExplosion(t.position),this.destroyEnemy(t,e,!1),this.lives<=0&&this.restartGame();continue}}for(let e=this.projectiles.length-1;e>=0;e--){let t=this.projectiles[e],s=t.position.clone();s.project(this.camera);let i=this.renderer.domElement,n=(s.x*.5+.5)*i.clientWidth,r=(-s.y*.5+.5)*i.clientHeight;for(let a=0;a<this.buttonScreenPositions.length;a++){let l=this.buttonScreenPositions[a];if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height){this.shakeButton(a),this.scene.remove(t),this.projectiles.splice(e,1);break}}}this.enemies.length===0&&(this.isGameWon||this.handleWin())}handleWin(){this.isGameWon=!0,this.playAudio(this.winSound),this.winSound?this.winSound.onended=()=>{this.winSound.onended=null,setTimeout(()=>{this.restartGame(),this.isGameWon=!1},5e3)}:setTimeout(()=>{this.restartGame(),this.isGameWon=!1},5e3)}destroyEnemy(e,t,s=!0){this.scene.remove(e),this.enemies.splice(t,1)}updateProjectiles(){for(let e=this.projectiles.length-1;e>=0;e--){let t=this.projectiles[e];t.position.add(t.userData.velocity),t.position.y>6&&(this.scene.remove(t),this.projectiles.splice(e,1))}}playerHit(){this.lives--,this.lives<=0&&this.restartGame()}checkCollision(e,t){return e.position.distanceTo(t.position)<e.userData.radius+t.userData.radius}createExplosion(e){this.createParticleEffect(e,12,.04,16755200,.4,30)}createSmallExplosion(e){this.createParticleEffect(e,6,.02,16755200,.2,20)}createBombExplosion(e){this.createParticleEffect(e,20,.06,16737792,.8,40)}createBlockParticles(e){for(let a=0;a<8;a++){let l=new j(new $(.05,.05,.05),new U({color:16098851}));l.position.copy(e),l.userData={velocity:new N((Math.random()-.5)*.3,(Math.random()-.5)*.3,(Math.random()-.5)*.3),life:60,radius:.05/2},this.scene.add(l),this.particles.push(l)}}createParticleEffect(e,t,s,i,n,r){let a=new $(s,s,s),l=new U({color:i});for(let c=0;c<t;c++){let h=new j(a,l);h.position.copy(e),h.userData={velocity:new N((Math.random()-.5)*n,(Math.random()-.2)*n,(Math.random()-.5)*n*.5),life:r,radius:.01},this.scene.add(h),this.particles.push(h)}}updateParticles(){for(let e=this.particles.length-1;e>=0;e--){let t=this.particles[e];t.position.add(t.userData.velocity),t.userData.life--,t.material.opacity=Math.max(0,t.userData.life/30),t.material.transparent=!0,t.userData.life<=0&&(this.scene.remove(t),this.particles.splice(e,1))}}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.updatePlayer(),this.updateEnemies(),this.updateProjectiles(),this.updateParticles(),this.renderer.render(this.scene,this.camera)}static \u0275fac=function(t){return new(t||o)(se($e),se(ke))};static \u0275cmp=Te({type:o,selectors:[["app-galaga-arcade"]],viewQuery:function(t,s){if(t&1&&De(At,5),t&2){let i;Ne(i=je())&&(s.gameContainer=i.first)}},hostBindings:function(t,s){t&1&&oe("resize",function(){return s.onResize()},te)("mousemove",function(n){return s.onMouseMove(n)},V)("click",function(n){return s.onClick(n)},V)("touchstart",function(n){return s.onTouchStart(n)},V)("touchmove",function(n){return s.onTouchMove(n)},V)("deviceorientation",function(n){return s.onDeviceOrientation(n)},te)("keydown",function(n){return s.onKeyDown(n)},V)},decls:4,vars:1,consts:[["gameContainer",""],["id","game-container"],[1,"absolute","bottom-4","left-4","z-10"],["class","control-button",3,"click",4,"ngIf"],[1,"control-button",3,"click"],[1,"text-white","text-xl",3,"icon"]],template:function(t,s){t&1&&(re(0,"div",1,0)(2,"div",2),Me(3,Ht,2,1,"button",3),ae()()),t&2&&(ie(3),ne("ngIf",s.hasDoneDamage))},dependencies:[Ie,Fe,Xe,ze],styles:["[_nghost-%COMP%]{display:block;width:100%;height:30vh;position:relative;background:transparent;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,SF Pro Display,SF Pro Text,Helvetica Neue,Helvetica,Arial,sans-serif;border-radius:16px}#game-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;border-radius:16px;overflow:hidden}canvas[_ngcontent-%COMP%]{display:block;border-radius:16px}.hidden[_ngcontent-%COMP%]{display:none}.apple-ui[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,SF Pro Display,SF Pro Text,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;letter-spacing:.5px;color:#fff}.apple-ui-bold[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,SF Pro Display,SF Pro Text,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:600;letter-spacing:.3px;color:#fff}.apple-glass[_ngcontent-%COMP%]{background:#0006;backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,.15);border-radius:16px;box-shadow:0 8px 32px #0006,0 2px 8px #0003}.apple-button[_ngcontent-%COMP%]{background:#ffffff1a;backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,.2);border-radius:12px;color:#fff;font-weight:500;letter-spacing:.5px;padding:12px 24px;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 16px #0003}.apple-button[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-2px);box-shadow:0 8px 32px #0000004d}.control-button[_ngcontent-%COMP%]{background:#f5a623cc;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:2px solid rgba(245,166,35,.6);border-radius:8px;color:#fff;width:48px;height:48px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;box-shadow:0 2px 8px #f5a6234d}.control-button[_ngcontent-%COMP%]:hover{background:#f5a623e6;transform:scale(1.05);box-shadow:0 4px 16px #f5a62366}.control-button[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.apple-glass[_ngcontent-%COMP%]{padding:12px 20px;border-radius:12px}.apple-ui[_ngcontent-%COMP%], .apple-ui-bold[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.apple-glass[_ngcontent-%COMP%]{padding:10px 16px;border-radius:10px}.apple-ui[_ngcontent-%COMP%], .apple-ui-bold[_ngcontent-%COMP%]{font-size:12px}}"],changeDetection:0})};export{pt as GalagaArcadeComponent};
