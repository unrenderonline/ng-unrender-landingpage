import{H as O,da as P}from"./chunk-APBCXCJV.js";import{a as M,b as E}from"./chunk-2PWV3ZRO.js";import"./chunk-7NMITLUU.js";import{k as C,l as T,r as B}from"./chunk-X7Q72NDQ.js";import{$a as v,Bb as m,Cb as i,Db as a,Eb as r,Lb as w,Oa as c,Pb as x,Ub as y,Vb as S,Wb as _,Xb as h,_b as d,ca as p,da as f,eb as g}from"./chunk-Z4PMJ25B.js";var Y=["barcodeTarget"];function z(s,o){if(s&1&&r(0,"div",27),s&2){let t=o.$implicit;h("width",t.width,"px")("height",t.height,"%")}}function D(s,o){s&1&&r(0,"div",28)}var V=class s{faBarcode=P;faBoxOpen=O;barcodeTarget;mouseY=0;mouseX=0;isScanning=!1;isTouch=!1;lastScanSuccess=!1;scanCooldown=!1;bars=Array(30).fill(0).map(()=>({width:Math.random()>.5?2:4,height:80+Math.random()*20}));onTouchMove(o){if(o.preventDefault(),this.isTouch=!0,o.touches.length>0){let t=o.touches[0],e=o.currentTarget.getBoundingClientRect();this.updatePosition(t.clientX,t.clientY,e)}}onMouseMove(o){this.isTouch=!1;let t=o.currentTarget.getBoundingClientRect();this.updatePosition(o.clientX,o.clientY,t)}updatePosition(o,t,e){if(this.mouseY=t-e.top,this.mouseX=o-e.left,this.barcodeTarget&&!this.scanCooldown){let n=this.barcodeTarget.nativeElement.getBoundingClientRect(),u=n.top-e.top,l=n.bottom-e.top,R=n.left-e.left,A=n.right-e.left,X=this.isTouch?80:30,b=this.mouseY-X-65,k=b>=u&&b<=l,F=this.mouseX>=R&&this.mouseX<=A;this.isScanning=!0,k&&F&&this.triggerScan()}else this.isScanning=!0}triggerScan(){this.scanCooldown=!0,this.lastScanSuccess=!0,this.playBeep(),setTimeout(()=>{this.lastScanSuccess=!1},500),setTimeout(()=>{this.scanCooldown=!1},1500)}playBeep(){try{let o=window.AudioContext||window.webkitAudioContext;if(o){let t=new o,e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.type="square",e.frequency.value=1500,n.gain.value=.1,e.start(),setTimeout(()=>e.stop(),100)}}catch{console.error("Audio not supported")}}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=v({type:s,selectors:[["app-barcode-scanner"]],viewQuery:function(t,e){if(t&1&&y(Y,5),t&2){let n;S(n=_())&&(e.barcodeTarget=n.first)}},decls:32,vars:10,consts:[["barcodeTarget",""],[1,"w-full","h-full","bg-white","rounded-2xl","overflow-hidden","flex","flex-col","relative","font-sans","cursor-none",3,"mousemove","touchmove","touchstart"],[1,"bg-white","p-4","shadow-sm","z-20","flex","justify-between","items-center","border-b","border-slate-100"],[1,"flex","items-center","gap-2","text-slate-800"],[1,"text-unrender-purple",3,"icon"],[1,"font-bold"],[1,"text-xs","text-slate-500","bg-slate-50","px-2","py-1","rounded"],[1,"flex-1","flex","items-center","justify-center","relative","bg-slate-50","overflow-hidden"],[1,"bg-white","p-8","rounded-xl","shadow-xl","transform","transition-transform","duration-300","hover:scale-105","relative","z-10","w-64","text-center","group","border","border-slate-100"],[1,"text-6xl","text-indigo-100","mb-4","group-hover:text-unrender-purple","transition-colors"],[3,"icon"],[1,"font-bold","text-slate-800","mb-1"],[1,"text-xs","text-slate-500","mb-6"],[1,"bg-white","border-2","border-slate-900","p-2","inline-block","cursor-crosshair","relative","overflow-hidden"],[1,"flex","gap-0.5","h-16","items-end","justify-center","opacity-80"],["class","bg-black",3,"width","height",4,"ngFor","ngForOf"],[1,"text-[10px]","font-mono","tracking-[0.3em]","mt-1","font-bold"],[1,"absolute","pointer-events-none","z-40",2,"transform","translate(-50%, -100%)"],[1,"relative"],[1,"absolute","top-10","left-1/2","-translate-x-1/2","w-8","h-24","bg-slate-800","rounded-b-lg","shadow-xl","border-r-2","border-slate-700"],[1,"relative","w-24","h-16","bg-slate-800","rounded-lg","shadow-2xl","flex","items-center","justify-center","border-t","border-slate-700"],[1,"absolute","bottom-[-5px]","left-8","w-4","h-6","bg-slate-900","rounded-sm"],[1,"absolute","top-0","w-16","h-1","bg-slate-700","rounded-full"],[1,"absolute","bottom-0","w-20","h-2","bg-red-900","rounded-full","opacity-50"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-1","w-0.5","h-16","bg-gradient-to-t","from-red-600","to-transparent","opacity-50","blur-sm"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-24","h-[2px]","bg-red-600","shadow-[0_0_15px_rgba(255,0,0,1)]"],["class","absolute inset-0 bg-green-500/20 z-20 pointer-events-none animate-flash",4,"ngIf"],[1,"bg-black"],[1,"absolute","inset-0","bg-green-500/20","z-20","pointer-events-none","animate-flash"]],template:function(t,e){if(t&1){let n=w();i(0,"div",1),x("mousemove",function(l){return p(n),f(e.onMouseMove(l))})("touchmove",function(l){return p(n),f(e.onTouchMove(l))})("touchstart",function(l){return p(n),f(e.onTouchMove(l))}),i(1,"div",2)(2,"div",3),r(3,"fa-icon",4),i(4,"span",5),d(5,"Barcode Scanner Demo"),a()(),i(6,"div",6),d(7," Use o mouse para controlar o scanner "),a()(),i(8,"div",7)(9,"div",8)(10,"div",9),r(11,"fa-icon",10),a(),i(12,"h3",11),d(13,"Produto Exemplo"),a(),i(14,"p",12),d(15,"SKU: 9823-1239-AX"),a(),i(16,"div",13,0)(18,"div",14),g(19,z,1,4,"div",15),a(),i(20,"div",16),d(21,"123456789012"),a()()(),i(22,"div",17)(23,"div",18),r(24,"div",19),i(25,"div",20),r(26,"div",21)(27,"div",22)(28,"div",23),a(),r(29,"div",24)(30,"div",25),a()(),g(31,D,1,0,"div",26),a()()}t&2&&(c(3),m("icon",e.faBarcode),c(8),m("icon",e.faBoxOpen),c(8),m("ngForOf",e.bars),c(3),h("left",e.mouseX,"px")("top",e.mouseY-(e.isTouch?80:30),"px"),c(8),h("opacity",e.isScanning?1:0),c(),m("ngIf",e.lastScanSuccess))},dependencies:[B,C,T,E,M],styles:["@keyframes _ngcontent-%COMP%_flash{0%{opacity:.5}to{opacity:0}}.animate-flash[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flash .5s ease-out forwards}"]})};export{V as BarcodeScannerComponent};
